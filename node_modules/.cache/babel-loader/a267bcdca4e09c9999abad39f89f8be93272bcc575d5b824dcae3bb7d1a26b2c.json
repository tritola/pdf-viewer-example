{"ast":null,"code":"'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n.default = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\nvar NextIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\\n            L23.541,5.627\"\n  }));\n};\nvar PreviousIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\\n            L0.535,18.373\"\n  }));\n};\nvar SearchIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    ignoreDirection: true,\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\\n            M23.5,23.5\\n            l-5.929-5.929\"\n  }));\n};\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar EMPTY_KEYWORD_REGEXP = {\n  keyword: '',\n  regExp: new RegExp(' '),\n  wholeWords: false\n};\nvar calculateOffset = function (children, parent) {\n  var top = children.offsetTop;\n  var left = children.offsetLeft;\n  var p = children.parentElement;\n  while (p && p !== parent) {\n    top += p.offsetTop;\n    left += p.offsetLeft;\n    p = p.parentElement;\n  }\n  return {\n    left: left,\n    top: top\n  };\n};\nvar getCssProperties = function (area) {\n  return {\n    left: \"\".concat(area.left, \"%\"),\n    top: \"\".concat(area.top, \"%\"),\n    height: \"\".concat(area.height, \"%\"),\n    width: \"\".concat(area.width, \"%\")\n  };\n};\nvar HightlightItem = function (_a) {\n  var index = _a.index,\n    area = _a.area,\n    onHighlightKeyword = _a.onHighlightKeyword;\n  var containerRef = React__namespace.useRef();\n  core.useIsomorphicLayoutEffect(function () {\n    var highlightEle = containerRef.current;\n    if (onHighlightKeyword && highlightEle) {\n      onHighlightKeyword({\n        highlightEle: highlightEle,\n        keyword: area.keyword\n      });\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-search__highlight\",\n    \"data-index\": index,\n    ref: containerRef,\n    style: getCssProperties(area),\n    title: area.keywordStr.trim()\n  });\n};\nvar removeNode = function (ele) {\n  var parent = ele.parentNode;\n  if (parent) {\n    parent.removeChild(ele);\n  }\n};\nvar replaceNode = function (replacementNode, node) {\n  removeNode(replacementNode);\n  var parent = node.parentNode;\n  if (parent) {\n    parent.insertBefore(replacementNode, node);\n  }\n  removeNode(node);\n};\nvar unwrap = function (ele) {\n  var parent = ele.parentNode;\n  if (!parent) {\n    return;\n  }\n  var range = document.createRange();\n  range.selectNodeContents(ele);\n  replaceNode(range.extractContents(), ele);\n  parent.normalize();\n};\nvar sortHighlightPosition = function (a, b) {\n  if (a.top < b.top) {\n    return -1;\n  }\n  if (a.top > b.top) {\n    return 1;\n  }\n  if (a.left < b.left) {\n    return -1;\n  }\n  if (a.left > b.left) {\n    return 1;\n  }\n  return 0;\n};\nvar Highlights = function (_a) {\n  var numPages = _a.numPages,\n    pageIndex = _a.pageIndex,\n    renderHighlights = _a.renderHighlights,\n    store = _a.store,\n    onHighlightKeyword = _a.onHighlightKeyword;\n  var containerRef = React__namespace.useRef();\n  var defaultRenderHighlights = React__namespace.useCallback(function (renderProps) {\n    return React__namespace.createElement(React__namespace.Fragment, null, renderProps.highlightAreas.map(function (area, index) {\n      return React__namespace.createElement(HightlightItem, {\n        index: index,\n        key: index,\n        area: area,\n        onHighlightKeyword: onHighlightKeyword\n      });\n    }));\n  }, []);\n  var renderHighlightElements = renderHighlights || defaultRenderHighlights;\n  var _b = React__namespace.useState(store.get('matchPosition')),\n    matchPosition = _b[0],\n    setMatchPosition = _b[1];\n  var _c = React__namespace.useState(store.get('keyword') || [EMPTY_KEYWORD_REGEXP]),\n    keywordRegexp = _c[0],\n    setKeywordRegexp = _c[1];\n  var _d = React__namespace.useState({\n      pageIndex: pageIndex,\n      scale: 1,\n      status: core.LayerRenderStatus.PreRender\n    }),\n    renderStatus = _d[0],\n    setRenderStatus = _d[1];\n  var currentMatchRef = React__namespace.useRef(null);\n  var characterIndexesRef = React__namespace.useRef([]);\n  var _e = React__namespace.useState([]),\n    highlightAreas = _e[0],\n    setHighlightAreas = _e[1];\n  var defaultTargetPageFilter = function () {\n    return true;\n  };\n  var targetPageFilter = React__namespace.useCallback(function () {\n    return store.get('targetPageFilter') || defaultTargetPageFilter;\n  }, [store.get('targetPageFilter')]);\n  var highlight = function (keywordStr, keyword, textLayerEle, span, charIndexSpan) {\n    var range = document.createRange();\n    var firstChild = span.firstChild;\n    if (!firstChild || firstChild.nodeType !== Node.TEXT_NODE) {\n      return null;\n    }\n    var length = firstChild.textContent.length;\n    var startOffset = charIndexSpan[0].charIndexInSpan;\n    var endOffset = charIndexSpan.length === 1 ? startOffset : charIndexSpan[charIndexSpan.length - 1].charIndexInSpan;\n    if (startOffset > length || endOffset + 1 > length) {\n      return null;\n    }\n    range.setStart(firstChild, startOffset);\n    range.setEnd(firstChild, endOffset + 1);\n    var wrapper = document.createElement('span');\n    range.surroundContents(wrapper);\n    var wrapperRect = wrapper.getBoundingClientRect();\n    var textLayerRect = textLayerEle.getBoundingClientRect();\n    var pageHeight = textLayerRect.height;\n    var pageWidth = textLayerRect.width;\n    var left = 100 * (wrapperRect.left - textLayerRect.left) / pageWidth;\n    var top = 100 * (wrapperRect.top - textLayerRect.top) / pageHeight;\n    var height = 100 * wrapperRect.height / pageHeight;\n    var width = 100 * wrapperRect.width / pageWidth;\n    unwrap(wrapper);\n    return {\n      keyword: keyword,\n      keywordStr: keywordStr,\n      numPages: numPages,\n      pageIndex: pageIndex,\n      left: left,\n      top: top,\n      height: height,\n      width: width,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth\n    };\n  };\n  var highlightAll = function (textLayerEle) {\n    var charIndexes = characterIndexesRef.current;\n    if (charIndexes.length === 0) {\n      return [];\n    }\n    var highlightPos = [];\n    var spans = [].slice.call(textLayerEle.querySelectorAll('.rpv-core__text-layer-text'));\n    var fullText = charIndexes.map(function (item) {\n      return item.char;\n    }).join('');\n    keywordRegexp.forEach(function (keyword) {\n      var keywordStr = keyword.keyword;\n      if (!keywordStr.trim()) {\n        return;\n      }\n      var cloneKeyword = keyword.regExp.flags.indexOf('g') === -1 ? new RegExp(keyword.regExp, \"\".concat(keyword.regExp.flags, \"g\")) : keyword.regExp;\n      var match;\n      var matches = [];\n      while ((match = cloneKeyword.exec(fullText)) !== null) {\n        matches.push({\n          keyword: cloneKeyword,\n          startIndex: match.index,\n          endIndex: cloneKeyword.lastIndex\n        });\n      }\n      matches.map(function (item) {\n        return {\n          keyword: item.keyword,\n          indexes: charIndexes.slice(item.startIndex, item.endIndex)\n        };\n      }).forEach(function (item) {\n        var spanIndexes = item.indexes.reduce(function (acc, item) {\n          acc[item.spanIndex] = (acc[item.spanIndex] || []).concat([item]);\n          return acc;\n        }, {});\n        Object.values(spanIndexes).forEach(function (charIndexSpan) {\n          if (charIndexSpan.length !== 1 || charIndexSpan[0].char.trim() !== '') {\n            var normalizedCharSpan = keyword.wholeWords ? charIndexSpan.slice(1, -1) : charIndexSpan;\n            var hightlighPosition = highlight(keywordStr, item.keyword, textLayerEle, spans[normalizedCharSpan[0].spanIndex], normalizedCharSpan);\n            if (hightlighPosition) {\n              highlightPos.push(hightlighPosition);\n            }\n          }\n        });\n      });\n    });\n    return highlightPos.sort(sortHighlightPosition);\n  };\n  var handleKeywordChanged = function (keyword) {\n    if (keyword && keyword.length > 0) {\n      setKeywordRegexp(keyword);\n    }\n  };\n  var handleMatchPositionChanged = function (currentPosition) {\n    return setMatchPosition(currentPosition);\n  };\n  var handleRenderStatusChanged = function (status) {\n    if (!status.has(pageIndex)) {\n      return;\n    }\n    var currentStatus = status.get(pageIndex);\n    if (currentStatus) {\n      setRenderStatus({\n        ele: currentStatus.ele,\n        pageIndex: pageIndex,\n        scale: currentStatus.scale,\n        status: currentStatus.status\n      });\n    }\n  };\n  var isEmptyKeyword = function () {\n    return keywordRegexp.length === 0 || keywordRegexp.length === 1 && keywordRegexp[0].keyword.trim() === '';\n  };\n  React__namespace.useEffect(function () {\n    if (isEmptyKeyword() || renderStatus.status !== core.LayerRenderStatus.DidRender || characterIndexesRef.current.length) {\n      return;\n    }\n    var textLayerEle = renderStatus.ele;\n    var spans = [].slice.call(textLayerEle.querySelectorAll('.rpv-core__text-layer-text'));\n    var charIndexes = spans.map(function (span) {\n      return span.textContent;\n    }).reduce(function (prev, curr, index) {\n      return prev.concat(curr.split('').map(function (c, i) {\n        return {\n          char: c,\n          charIndexInSpan: i,\n          spanIndex: index\n        };\n      }));\n    }, [{\n      char: '',\n      charIndexInSpan: 0,\n      spanIndex: 0\n    }]).slice(1);\n    characterIndexesRef.current = charIndexes;\n  }, [keywordRegexp, renderStatus.status]);\n  React__namespace.useEffect(function () {\n    if (isEmptyKeyword() || !renderStatus.ele || renderStatus.status !== core.LayerRenderStatus.DidRender || !targetPageFilter()({\n      pageIndex: pageIndex,\n      numPages: numPages\n    })) {\n      return;\n    }\n    var textLayerEle = renderStatus.ele;\n    var highlightPos = highlightAll(textLayerEle);\n    setHighlightAreas(highlightPos);\n  }, [keywordRegexp, matchPosition, renderStatus.status, characterIndexesRef.current]);\n  React__namespace.useEffect(function () {\n    if (isEmptyKeyword() && renderStatus.ele && renderStatus.status === core.LayerRenderStatus.DidRender) {\n      setHighlightAreas([]);\n    }\n  }, [keywordRegexp, renderStatus.status]);\n  React__namespace.useEffect(function () {\n    if (highlightAreas.length === 0) {\n      return;\n    }\n    var container = containerRef.current;\n    if (matchPosition.pageIndex !== pageIndex || !container || renderStatus.status !== core.LayerRenderStatus.DidRender) {\n      return;\n    }\n    var highlightEle = container.querySelector(\".rpv-search__highlight[data-index=\\\"\".concat(matchPosition.matchIndex, \"\\\"]\"));\n    if (!highlightEle) {\n      return;\n    }\n    var _a = calculateOffset(highlightEle, container),\n      left = _a.left,\n      top = _a.top;\n    var jump = store.get('jumpToDestination');\n    if (jump) {\n      jump({\n        pageIndex: pageIndex,\n        bottomOffset: (container.getBoundingClientRect().height - top) / renderStatus.scale,\n        leftOffset: left / renderStatus.scale,\n        scaleTo: renderStatus.scale\n      });\n      if (currentMatchRef.current) {\n        currentMatchRef.current.classList.remove('rpv-search__highlight--current');\n      }\n      currentMatchRef.current = highlightEle;\n      highlightEle.classList.add('rpv-search__highlight--current');\n    }\n  }, [highlightAreas, matchPosition]);\n  React__namespace.useEffect(function () {\n    store.subscribe('keyword', handleKeywordChanged);\n    store.subscribe('matchPosition', handleMatchPositionChanged);\n    store.subscribe('renderStatus', handleRenderStatusChanged);\n    return function () {\n      store.unsubscribe('keyword', handleKeywordChanged);\n      store.unsubscribe('matchPosition', handleMatchPositionChanged);\n      store.unsubscribe('renderStatus', handleRenderStatusChanged);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-search__highlights\",\n    \"data-testid\": \"search__highlights-\".concat(pageIndex),\n    ref: containerRef\n  }, renderHighlightElements({\n    getCssProperties: getCssProperties,\n    highlightAreas: highlightAreas\n  }));\n};\nvar escapeRegExp = function (input) {\n  return input.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n};\nvar normalizeFlagKeyword = function (flagKeyword) {\n  var source = flagKeyword.wholeWords ? \" \".concat(flagKeyword.keyword, \" \") : flagKeyword.keyword;\n  var flags = flagKeyword.matchCase ? 'g' : 'gi';\n  return {\n    keyword: flagKeyword.keyword,\n    regExp: new RegExp(escapeRegExp(source), flags),\n    wholeWords: flagKeyword.wholeWords || false\n  };\n};\nvar normalizeSingleKeyword = function (keyword, matchCase, wholeWords) {\n  if (keyword instanceof RegExp) {\n    return {\n      keyword: keyword.source,\n      regExp: keyword,\n      wholeWords: wholeWords || false\n    };\n  }\n  if (typeof keyword === 'string') {\n    return keyword === '' ? EMPTY_KEYWORD_REGEXP : normalizeFlagKeyword({\n      keyword: keyword,\n      matchCase: matchCase || false,\n      wholeWords: wholeWords || false\n    });\n  }\n  if (typeof matchCase !== 'undefined') {\n    keyword.matchCase = matchCase;\n  }\n  if (typeof wholeWords !== 'undefined') {\n    keyword.wholeWords = wholeWords;\n  }\n  return normalizeFlagKeyword(keyword);\n};\nvar useDocument = function (store) {\n  var currentDocRef = React__namespace.useRef(store.get('doc'));\n  var handleDocumentChanged = function (doc) {\n    currentDocRef.current = doc;\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return currentDocRef;\n};\nvar useSearch = function (store) {\n  var initialKeyword = store.get('initialKeyword');\n  var normalizedKeywordFlags = React__namespace.useMemo(function () {\n    if (initialKeyword && initialKeyword.length === 1) {\n      var normalizedKeyword = normalizeSingleKeyword(initialKeyword[0]);\n      return {\n        matchCase: normalizedKeyword.regExp.flags.indexOf('i') === -1,\n        wholeWords: normalizedKeyword.wholeWords\n      };\n    } else {\n      return {\n        matchCase: false,\n        wholeWords: false\n      };\n    }\n  }, []);\n  var currentDocRef = useDocument(store);\n  var _a = React__namespace.useState(initialKeyword),\n    keywords = _a[0],\n    setKeywords = _a[1];\n  var _b = React__namespace.useState([]),\n    found = _b[0],\n    setFound = _b[1];\n  var _c = React__namespace.useState(0),\n    currentMatch = _c[0],\n    setCurrentMatch = _c[1];\n  var _d = React__namespace.useState(normalizedKeywordFlags.matchCase),\n    matchCase = _d[0],\n    setMatchCase = _d[1];\n  var textContents = React__namespace.useRef([]);\n  var _e = React__namespace.useState(normalizedKeywordFlags.wholeWords),\n    wholeWords = _e[0],\n    setWholeWords = _e[1];\n  var defaultTargetPageFilter = function () {\n    return true;\n  };\n  var targetPageFilter = React__namespace.useCallback(function () {\n    return store.get('targetPageFilter') || defaultTargetPageFilter;\n  }, [store.get('targetPageFilter')]);\n  var changeMatchCase = function (isChecked) {\n    setMatchCase(isChecked);\n    if (keywords.length > 0) {\n      searchFor(keywords, isChecked, wholeWords);\n    }\n  };\n  var changeWholeWords = function (isChecked) {\n    setWholeWords(isChecked);\n    if (keywords.length > 0) {\n      searchFor(keywords, matchCase, isChecked);\n    }\n  };\n  var jumpToMatch = function (index) {\n    var numMatches = found.length;\n    if (keywords.length === 0 || numMatches === 0) {\n      return null;\n    }\n    var normalizedIndex = index === numMatches + 1 ? 1 : Math.max(1, Math.min(numMatches, index));\n    setCurrentMatch(normalizedIndex);\n    return jumpToGivenMatch(found[normalizedIndex - 1]);\n  };\n  var jumpToPreviousMatch = function () {\n    return jumpToMatch(currentMatch - 1);\n  };\n  var jumpToNextMatch = function () {\n    return jumpToMatch(currentMatch + 1);\n  };\n  var clearKeyword = function () {\n    store.update('keyword', [EMPTY_KEYWORD_REGEXP]);\n    setKeyword('');\n    setCurrentMatch(0);\n    setFound([]);\n    setMatchCase(false);\n    setWholeWords(false);\n  };\n  var search = function () {\n    return searchFor(keywords, matchCase, wholeWords);\n  };\n  var setKeyword = function (keyword) {\n    return setKeywords(keyword === '' ? [] : [keyword]);\n  };\n  var setTargetPages = function (targetPageFilter) {\n    store.update('targetPageFilter', targetPageFilter);\n  };\n  var getTextContents = function () {\n    var currentDoc = currentDocRef.current;\n    if (!currentDoc) {\n      return Promise.resolve([]);\n    }\n    var promises = Array(currentDoc.numPages).fill(0).map(function (_, pageIndex) {\n      return core.getPage(currentDoc, pageIndex).then(function (page) {\n        return page.getTextContent();\n      }).then(function (content) {\n        var pageContent = content.items.map(function (item) {\n          return item.str || '';\n        }).join('');\n        return Promise.resolve({\n          pageContent: pageContent,\n          pageIndex: pageIndex\n        });\n      });\n    });\n    return Promise.all(promises).then(function (data) {\n      data.sort(function (a, b) {\n        return a.pageIndex - b.pageIndex;\n      });\n      return Promise.resolve(data.map(function (item) {\n        return item.pageContent;\n      }));\n    });\n  };\n  var jumpToGivenMatch = function (match) {\n    var jumpToPage = store.get('jumpToPage');\n    if (jumpToPage) {\n      jumpToPage(match.pageIndex);\n    }\n    store.update('matchPosition', {\n      matchIndex: match.matchIndex,\n      pageIndex: match.pageIndex\n    });\n    return match;\n  };\n  var getKeywordSource = function (keyword) {\n    if (keyword instanceof RegExp) {\n      return keyword.source;\n    }\n    if (typeof keyword === 'string') {\n      return keyword;\n    }\n    return keyword.keyword;\n  };\n  var searchFor = function (keywordParam, matchCaseParam, wholeWordsParam) {\n    var currentDoc = currentDocRef.current;\n    if (!currentDoc) {\n      return Promise.resolve([]);\n    }\n    var numPages = currentDoc.numPages;\n    var keywords = keywordParam.map(function (k) {\n      return normalizeSingleKeyword(k, matchCaseParam, wholeWordsParam);\n    });\n    store.update('keyword', keywords);\n    setCurrentMatch(0);\n    setFound([]);\n    return new Promise(function (resolve, _) {\n      var getTextPromise = textContents.current.length === 0 ? getTextContents().then(function (response) {\n        textContents.current = response;\n        return Promise.resolve(response);\n      }) : Promise.resolve(textContents.current);\n      getTextPromise.then(function (response) {\n        var arr = [];\n        response.forEach(function (pageText, pageIndex) {\n          if (targetPageFilter()({\n            pageIndex: pageIndex,\n            numPages: numPages\n          })) {\n            keywords.forEach(function (keyword) {\n              var matchIndex = 0;\n              var matches;\n              while ((matches = keyword.regExp.exec(pageText)) !== null) {\n                arr.push({\n                  keyword: keyword.regExp,\n                  matchIndex: matchIndex,\n                  pageIndex: pageIndex,\n                  pageText: pageText,\n                  startIndex: matches.index,\n                  endIndex: keyword.regExp.lastIndex\n                });\n                matchIndex++;\n              }\n            });\n          }\n        });\n        setFound(arr);\n        if (arr.length > 0) {\n          setCurrentMatch(1);\n          jumpToGivenMatch(arr[0]);\n        }\n        resolve(arr);\n      });\n    });\n  };\n  React__namespace.useEffect(function () {\n    textContents.current = [];\n  }, [currentDocRef.current]);\n  return {\n    clearKeyword: clearKeyword,\n    changeMatchCase: changeMatchCase,\n    changeWholeWords: changeWholeWords,\n    currentMatch: currentMatch,\n    jumpToMatch: jumpToMatch,\n    jumpToNextMatch: jumpToNextMatch,\n    jumpToPreviousMatch: jumpToPreviousMatch,\n    keywords: keywords,\n    matchCase: matchCase,\n    numberOfMatches: found.length,\n    wholeWords: wholeWords,\n    search: search,\n    searchFor: searchFor,\n    setKeywords: setKeywords,\n    keyword: keywords.length === 0 ? '' : getKeywordSource(keywords[0]),\n    setKeyword: setKeyword,\n    setTargetPages: setTargetPages\n  };\n};\nvar Search = function (_a) {\n  var children = _a.children,\n    store = _a.store;\n  var result = useSearch(store);\n  var _b = React__namespace.useState(false),\n    isDocumentLoaded = _b[0],\n    setDocumentLoaded = _b[1];\n  var handleDocumentChanged = function (_) {\n    return setDocumentLoaded(true);\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return children(__assign(__assign({}, result), {\n    isDocumentLoaded: isDocumentLoaded\n  }));\n};\nvar ShortcutHandler = function (_a) {\n  var containerRef = _a.containerRef,\n    store = _a.store;\n  var isMouseInsideRef = React__namespace.useRef(false);\n  var handleMouseEnter = function () {\n    isMouseInsideRef.current = true;\n  };\n  var handleMouseLeave = function () {\n    isMouseInsideRef.current = false;\n  };\n  var handleKeydown = function (e) {\n    var containerEle = containerRef.current;\n    if (!containerEle) {\n      return;\n    }\n    if (e.shiftKey || e.altKey || e.key !== 'f') {\n      return;\n    }\n    var isCommandPressed = core.isMac() ? e.metaKey && !e.ctrlKey : e.ctrlKey;\n    if (!isCommandPressed) {\n      return;\n    }\n    if (isMouseInsideRef.current || document.activeElement && containerEle.contains(document.activeElement)) {\n      e.preventDefault();\n      store.update('areShortcutsPressed', true);\n    }\n  };\n  React__namespace.useEffect(function () {\n    var containerEle = containerRef.current;\n    if (!containerEle) {\n      return;\n    }\n    document.addEventListener('keydown', handleKeydown);\n    containerEle.addEventListener('mouseenter', handleMouseEnter);\n    containerEle.addEventListener('mouseleave', handleMouseLeave);\n    return function () {\n      document.removeEventListener('keydown', handleKeydown);\n      containerEle.removeEventListener('mouseenter', handleMouseEnter);\n      containerEle.removeEventListener('mouseleave', handleMouseLeave);\n    };\n  }, [containerRef.current]);\n  return React__namespace.createElement(React__namespace.Fragment, null);\n};\nvar PORTAL_OFFSET$1 = {\n  left: 0,\n  top: 8\n};\nvar SearchPopover = function (_a) {\n  var store = _a.store,\n    onToggle = _a.onToggle;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var _b = React__namespace.useState(false),\n    isQuerying = _b[0],\n    setIsQuerying = _b[1];\n  var _c = React__namespace.useState(false),\n    searchDone = _c[0],\n    setSearchDone = _c[1];\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var _d = useSearch(store),\n    clearKeyword = _d.clearKeyword,\n    changeMatchCase = _d.changeMatchCase,\n    changeWholeWords = _d.changeWholeWords,\n    currentMatch = _d.currentMatch,\n    jumpToNextMatch = _d.jumpToNextMatch,\n    jumpToPreviousMatch = _d.jumpToPreviousMatch,\n    keyword = _d.keyword,\n    matchCase = _d.matchCase,\n    numberOfMatches = _d.numberOfMatches,\n    wholeWords = _d.wholeWords,\n    search = _d.search,\n    setKeyword = _d.setKeyword;\n  var performSearch = function (cb) {\n    setIsQuerying(true);\n    search().then(function (_) {\n      setIsQuerying(false);\n      setSearchDone(true);\n      cb && cb();\n    });\n  };\n  var onKeydownSearch = function (e) {\n    if (e.key === 'Enter' && keyword) {\n      searchDone ? jumpToNextMatch() : performSearch();\n    }\n  };\n  var onChangeMatchCase = function (e) {\n    setSearchDone(false);\n    changeMatchCase(e.target.checked);\n  };\n  var onChangeWholeWords = function (e) {\n    setSearchDone(false);\n    changeWholeWords(e.target.checked);\n  };\n  var onClose = function () {\n    onToggle();\n    clearKeyword();\n  };\n  var onChangeKeyword = function (value) {\n    setSearchDone(false);\n    setKeyword(value);\n  };\n  React__namespace.useEffect(function () {\n    var initialKeyword = store.get('initialKeyword');\n    if (initialKeyword && initialKeyword.length === 1 && keyword) {\n      performSearch(function () {\n        store.update('initialKeyword', []);\n      });\n    }\n  }, []);\n  var searchLabel = l10n && l10n.search ? l10n.search.enterToSearch : 'Enter to search';\n  var previousMatchLabel = l10n && l10n.search ? l10n.search.previousMatch : 'Previous match';\n  var nextMatchLabel = l10n && l10n.search ? l10n.search.nextMatch : 'Next match';\n  var closeButtonLabel = l10n && l10n.search ? l10n.search.close : 'Close';\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-search__popover\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-search__popover-input-counter\"\n  }, React__namespace.createElement(core.TextBox, {\n    ariaLabel: searchLabel,\n    autoFocus: true,\n    placeholder: searchLabel,\n    type: \"text\",\n    value: keyword,\n    onChange: onChangeKeyword,\n    onKeyDown: onKeydownSearch\n  }), React__namespace.createElement(\"div\", {\n    className: core.classNames({\n      'rpv-search__popover-counter': true,\n      'rpv-search__popover-counter--ltr': !isRtl,\n      'rpv-search__popover-counter--rtl': isRtl\n    })\n  }, isQuerying && React__namespace.createElement(core.Spinner, {\n    testId: \"search__popover-searching\",\n    size: \"1rem\"\n  }), !isQuerying && React__namespace.createElement(\"span\", {\n    \"data-testid\": \"search__popover-num-matches\"\n  }, currentMatch, \"/\", numberOfMatches))), React__namespace.createElement(\"label\", {\n    className: \"rpv-search__popover-label\"\n  }, React__namespace.createElement(\"input\", {\n    className: \"rpv-search__popover-label-checkbox\",\n    \"data-testid\": \"search__popover-match-case\",\n    checked: matchCase,\n    type: \"checkbox\",\n    onChange: onChangeMatchCase\n  }), ' ', l10n && l10n.search ? l10n.search.matchCase : 'Match case'), React__namespace.createElement(\"label\", {\n    className: \"rpv-search__popover-label\"\n  }, React__namespace.createElement(\"input\", {\n    className: \"rpv-search__popover-label-checkbox\",\n    checked: wholeWords,\n    \"data-testid\": \"search__popover-whole-words\",\n    type: \"checkbox\",\n    onChange: onChangeWholeWords\n  }), ' ', l10n && l10n.search ? l10n.search.wholeWords : 'Whole words'), React__namespace.createElement(\"div\", {\n    className: \"rpv-search__popover-footer\"\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-search__popover-footer-item\"\n  }, React__namespace.createElement(core.Tooltip, {\n    ariaControlsSuffix: \"search-previous-match\",\n    position: isRtl ? core.Position.BottomRight : core.Position.BottomCenter,\n    target: React__namespace.createElement(core.MinimalButton, {\n      ariaLabel: previousMatchLabel,\n      isDisabled: currentMatch <= 1,\n      onClick: jumpToPreviousMatch\n    }, React__namespace.createElement(PreviousIcon, null)),\n    content: function () {\n      return previousMatchLabel;\n    },\n    offset: PORTAL_OFFSET$1\n  })), React__namespace.createElement(\"div\", {\n    className: \"rpv-search__popover-footer-item\"\n  }, React__namespace.createElement(core.Tooltip, {\n    ariaControlsSuffix: \"search-next-match\",\n    position: core.Position.BottomCenter,\n    target: React__namespace.createElement(core.MinimalButton, {\n      ariaLabel: nextMatchLabel,\n      isDisabled: currentMatch > numberOfMatches - 1,\n      onClick: jumpToNextMatch\n    }, React__namespace.createElement(NextIcon, null)),\n    content: function () {\n      return nextMatchLabel;\n    },\n    offset: PORTAL_OFFSET$1\n  })), React__namespace.createElement(\"div\", {\n    className: core.classNames({\n      'rpv-search__popover-footer-button': true,\n      'rpv-search__popover-footer-button--ltr': !isRtl,\n      'rpv-search__popover-footer-button--rtl': isRtl\n    })\n  }, React__namespace.createElement(core.Button, {\n    onClick: onClose\n  }, closeButtonLabel))));\n};\nvar ShowSearchPopoverDecorator = function (_a) {\n  var children = _a.children,\n    onClick = _a.onClick;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var label = l10n && l10n.search ? l10n.search.search : 'Search';\n  var icon = React__namespace.createElement(SearchIcon, null);\n  return children({\n    icon: icon,\n    label: label,\n    onClick: onClick\n  });\n};\nvar TOOLTIP_OFFSET = {\n  left: 0,\n  top: 8\n};\nvar ShowSearchPopoverButton = function (_a) {\n  var enableShortcuts = _a.enableShortcuts,\n    store = _a.store,\n    onClick = _a.onClick;\n  var ariaKeyShortcuts = enableShortcuts ? core.isMac() ? 'Meta+F' : 'Ctrl+F' : '';\n  var handleShortcutsPressed = function (areShortcutsPressed) {\n    if (areShortcutsPressed) {\n      onClick();\n    }\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('areShortcutsPressed', handleShortcutsPressed);\n    return function () {\n      store.unsubscribe('areShortcutsPressed', handleShortcutsPressed);\n    };\n  }, []);\n  return React__namespace.createElement(ShowSearchPopoverDecorator, {\n    onClick: onClick\n  }, function (p) {\n    return React__namespace.createElement(core.Tooltip, {\n      ariaControlsSuffix: \"search-popover\",\n      position: core.Position.BottomCenter,\n      target: React__namespace.createElement(core.MinimalButton, {\n        ariaKeyShortcuts: ariaKeyShortcuts,\n        ariaLabel: p.label,\n        testId: \"search__popover-button\",\n        onClick: onClick\n      }, p.icon),\n      content: function () {\n        return p.label;\n      },\n      offset: TOOLTIP_OFFSET\n    });\n  });\n};\nvar PORTAL_OFFSET = {\n  left: 0,\n  top: 8\n};\nvar ShowSearchPopover = function (_a) {\n  var children = _a.children,\n    enableShortcuts = _a.enableShortcuts,\n    store = _a.store;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var portalPosition = direction === core.TextDirection.RightToLeft ? core.Position.BottomRight : core.Position.BottomLeft;\n  var defaultChildren = function (props) {\n    return React__namespace.createElement(ShowSearchPopoverButton, __assign({\n      enableShortcuts: enableShortcuts,\n      store: store\n    }, props));\n  };\n  var render = children || defaultChildren;\n  return React__namespace.createElement(core.Popover, {\n    ariaControlsSuffix: \"search\",\n    lockScroll: false,\n    position: portalPosition,\n    target: function (toggle) {\n      return render({\n        onClick: toggle\n      });\n    },\n    content: function (toggle) {\n      return React__namespace.createElement(SearchPopover, {\n        store: store,\n        onToggle: toggle\n      });\n    },\n    offset: PORTAL_OFFSET,\n    closeOnClickOutside: false,\n    closeOnEscape: true\n  });\n};\nvar normalizeKeywords = function (keyword) {\n  return Array.isArray(keyword) ? keyword.map(function (k) {\n    return normalizeSingleKeyword(k);\n  }) : [normalizeSingleKeyword(keyword)];\n};\nvar searchPlugin = function (props) {\n  var searchPluginProps = React__namespace.useMemo(function () {\n    return Object.assign({}, {\n      enableShortcuts: true,\n      onHighlightKeyword: function () {}\n    }, props);\n  }, []);\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      initialKeyword: props && props.keyword ? Array.isArray(props.keyword) ? props.keyword : [props.keyword] : [],\n      keyword: props && props.keyword ? normalizeKeywords(props.keyword) : [EMPTY_KEYWORD_REGEXP],\n      matchPosition: {\n        matchIndex: -1,\n        pageIndex: -1\n      },\n      renderStatus: new Map()\n    });\n  }, []);\n  var _a = useSearch(store),\n    clearKeyword = _a.clearKeyword,\n    jumpToMatch = _a.jumpToMatch,\n    jumpToNextMatch = _a.jumpToNextMatch,\n    jumpToPreviousMatch = _a.jumpToPreviousMatch,\n    searchFor = _a.searchFor,\n    setKeywords = _a.setKeywords,\n    setTargetPages = _a.setTargetPages;\n  var SearchDecorator = function (props) {\n    return React__namespace.createElement(Search, __assign({}, props, {\n      store: store\n    }));\n  };\n  var ShowSearchPopoverDecorator = function (props) {\n    return React__namespace.createElement(ShowSearchPopover, __assign({\n      enableShortcuts: searchPluginProps.enableShortcuts\n    }, props, {\n      store: store\n    }));\n  };\n  var ShowSearchPopoverButtonDecorator = function () {\n    return React__namespace.createElement(ShowSearchPopoverDecorator, null, function (props) {\n      return React__namespace.createElement(ShowSearchPopoverButton, __assign({\n        enableShortcuts: searchPluginProps.enableShortcuts,\n        store: store\n      }, props));\n    });\n  };\n  var renderViewer = function (renderViewerProps) {\n    var currentSlot = renderViewerProps.slot;\n    if (currentSlot.subSlot) {\n      currentSlot.subSlot.children = React__namespace.createElement(React__namespace.Fragment, null, searchPluginProps.enableShortcuts && React__namespace.createElement(ShortcutHandler, {\n        containerRef: renderViewerProps.containerRef,\n        store: store\n      }), currentSlot.subSlot.children);\n    }\n    return currentSlot;\n  };\n  var renderPageLayer = function (renderProps) {\n    return React__namespace.createElement(Highlights, {\n      key: renderProps.pageIndex,\n      numPages: renderProps.doc.numPages,\n      pageIndex: renderProps.pageIndex,\n      renderHighlights: props === null || props === void 0 ? void 0 : props.renderHighlights,\n      store: store,\n      onHighlightKeyword: searchPluginProps.onHighlightKeyword\n    });\n  };\n  return {\n    install: function (pluginFunctions) {\n      var initialKeyword = props && props.keyword ? Array.isArray(props.keyword) ? props.keyword : [props.keyword] : [];\n      var keyword = props && props.keyword ? normalizeKeywords(props.keyword) : [EMPTY_KEYWORD_REGEXP];\n      store.update('initialKeyword', initialKeyword);\n      store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n      store.update('jumpToPage', pluginFunctions.jumpToPage);\n      store.update('keyword', keyword);\n    },\n    renderPageLayer: renderPageLayer,\n    renderViewer: renderViewer,\n    uninstall: function (props) {\n      var renderStatus = store.get('renderStatus');\n      if (renderStatus) {\n        renderStatus.clear();\n      }\n    },\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    onTextLayerRender: function (props) {\n      var renderStatus = store.get('renderStatus');\n      if (renderStatus) {\n        renderStatus = renderStatus.set(props.pageIndex, props);\n        store.update('renderStatus', renderStatus);\n      }\n    },\n    Search: SearchDecorator,\n    ShowSearchPopover: ShowSearchPopoverDecorator,\n    ShowSearchPopoverButton: ShowSearchPopoverButtonDecorator,\n    clearHighlights: function () {\n      clearKeyword();\n    },\n    highlight: function (keyword) {\n      var keywords = Array.isArray(keyword) ? keyword : [keyword];\n      setKeywords(keywords);\n      return searchFor(keywords);\n    },\n    jumpToMatch: jumpToMatch,\n    jumpToNextMatch: jumpToNextMatch,\n    jumpToPreviousMatch: jumpToPreviousMatch,\n    setTargetPages: setTargetPages\n  };\n};\nexports.NextIcon = NextIcon;\nexports.PreviousIcon = PreviousIcon;\nexports.SearchIcon = SearchIcon;\nexports.searchPlugin = searchPlugin;","map":{"version":3,"names":["core","require","React","_interopNamespaceDefault","e","n","Object","create","keys","forEach","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","default","freeze","React__namespace","NextIcon","createElement","Icon","size","PreviousIcon","SearchIcon","ignoreDirection","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","EMPTY_KEYWORD_REGEXP","keyword","regExp","RegExp","wholeWords","calculateOffset","children","parent","top","offsetTop","left","offsetLeft","parentElement","getCssProperties","area","concat","height","width","HightlightItem","_a","index","onHighlightKeyword","containerRef","useRef","useIsomorphicLayoutEffect","highlightEle","current","className","ref","style","title","keywordStr","trim","removeNode","ele","parentNode","removeChild","replaceNode","replacementNode","node","insertBefore","unwrap","range","document","createRange","selectNodeContents","extractContents","normalize","sortHighlightPosition","a","b","Highlights","numPages","pageIndex","renderHighlights","store","defaultRenderHighlights","useCallback","renderProps","Fragment","highlightAreas","map","key","renderHighlightElements","_b","useState","matchPosition","setMatchPosition","_c","keywordRegexp","setKeywordRegexp","_d","scale","status","LayerRenderStatus","PreRender","renderStatus","setRenderStatus","currentMatchRef","characterIndexesRef","_e","setHighlightAreas","defaultTargetPageFilter","targetPageFilter","highlight","textLayerEle","span","charIndexSpan","firstChild","nodeType","Node","TEXT_NODE","textContent","startOffset","charIndexInSpan","endOffset","setStart","setEnd","wrapper","surroundContents","wrapperRect","getBoundingClientRect","textLayerRect","pageHeight","pageWidth","highlightAll","charIndexes","highlightPos","spans","slice","querySelectorAll","fullText","item","char","join","cloneKeyword","flags","indexOf","match","matches","exec","push","startIndex","endIndex","lastIndex","indexes","spanIndexes","reduce","acc","spanIndex","values","normalizedCharSpan","hightlighPosition","sort","handleKeywordChanged","handleMatchPositionChanged","currentPosition","handleRenderStatusChanged","has","currentStatus","isEmptyKeyword","useEffect","DidRender","prev","curr","split","c","container","querySelector","matchIndex","jump","bottomOffset","leftOffset","scaleTo","classList","remove","add","subscribe","unsubscribe","escapeRegExp","input","replace","normalizeFlagKeyword","flagKeyword","source","matchCase","normalizeSingleKeyword","useDocument","currentDocRef","handleDocumentChanged","doc","useSearch","initialKeyword","normalizedKeywordFlags","useMemo","normalizedKeyword","keywords","setKeywords","found","setFound","currentMatch","setCurrentMatch","setMatchCase","textContents","setWholeWords","changeMatchCase","isChecked","searchFor","changeWholeWords","jumpToMatch","numMatches","normalizedIndex","Math","max","min","jumpToGivenMatch","jumpToPreviousMatch","jumpToNextMatch","clearKeyword","update","setKeyword","search","setTargetPages","getTextContents","currentDoc","Promise","resolve","promises","Array","fill","_","getPage","then","page","getTextContent","content","pageContent","items","str","all","data","jumpToPage","getKeywordSource","keywordParam","matchCaseParam","wholeWordsParam","getTextPromise","response","arr","pageText","numberOfMatches","Search","result","isDocumentLoaded","setDocumentLoaded","ShortcutHandler","isMouseInsideRef","handleMouseEnter","handleMouseLeave","handleKeydown","containerEle","shiftKey","altKey","isCommandPressed","isMac","metaKey","ctrlKey","activeElement","contains","preventDefault","addEventListener","removeEventListener","PORTAL_OFFSET$1","SearchPopover","onToggle","l10n","useContext","LocalizationContext","direction","ThemeContext","isQuerying","setIsQuerying","searchDone","setSearchDone","isRtl","TextDirection","RightToLeft","performSearch","cb","onKeydownSearch","onChangeMatchCase","target","checked","onChangeWholeWords","onClose","onChangeKeyword","value","searchLabel","enterToSearch","previousMatchLabel","previousMatch","nextMatchLabel","nextMatch","closeButtonLabel","close","TextBox","ariaLabel","autoFocus","placeholder","type","onChange","onKeyDown","classNames","Spinner","testId","Tooltip","ariaControlsSuffix","position","Position","BottomRight","BottomCenter","MinimalButton","isDisabled","onClick","offset","Button","ShowSearchPopoverDecorator","label","icon","TOOLTIP_OFFSET","ShowSearchPopoverButton","enableShortcuts","ariaKeyShortcuts","handleShortcutsPressed","areShortcutsPressed","PORTAL_OFFSET","ShowSearchPopover","portalPosition","BottomLeft","defaultChildren","props","render","Popover","lockScroll","toggle","closeOnClickOutside","closeOnEscape","normalizeKeywords","isArray","searchPlugin","searchPluginProps","createStore","Map","SearchDecorator","ShowSearchPopoverButtonDecorator","renderViewer","renderViewerProps","currentSlot","slot","subSlot","renderPageLayer","install","pluginFunctions","jumpToDestination","uninstall","clear","onDocumentLoad","onTextLayerRender","set","clearHighlights","exports"],"sources":["/Users/tuomasritola/Documents/Projects/examples/pdf-viewer-example/node_modules/@react-pdf-viewer/search/lib/cjs/search.js"],"sourcesContent":["'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\n\nfunction _interopNamespaceDefault(e) {\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n.default = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\n\nvar NextIcon = function () { return (React__namespace.createElement(core.Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\\n            L23.541,5.627\" }))); };\n\nvar PreviousIcon = function () { return (React__namespace.createElement(core.Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\\n            L0.535,18.373\" }))); };\n\nvar SearchIcon = function () { return (React__namespace.createElement(core.Icon, { ignoreDirection: true, size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\\n            M23.5,23.5\\n            l-5.929-5.929\" }))); };\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar EMPTY_KEYWORD_REGEXP = {\n    keyword: '',\n    regExp: new RegExp(' '),\n    wholeWords: false,\n};\n\nvar calculateOffset = function (children, parent) {\n    var top = children.offsetTop;\n    var left = children.offsetLeft;\n    var p = children.parentElement;\n    while (p && p !== parent) {\n        top += p.offsetTop;\n        left += p.offsetLeft;\n        p = p.parentElement;\n    }\n    return {\n        left: left,\n        top: top,\n    };\n};\n\nvar getCssProperties = function (area) {\n    return {\n        left: \"\".concat(area.left, \"%\"),\n        top: \"\".concat(area.top, \"%\"),\n        height: \"\".concat(area.height, \"%\"),\n        width: \"\".concat(area.width, \"%\"),\n    };\n};\n\nvar HightlightItem = function (_a) {\n    var index = _a.index, area = _a.area, onHighlightKeyword = _a.onHighlightKeyword;\n    var containerRef = React__namespace.useRef();\n    core.useIsomorphicLayoutEffect(function () {\n        var highlightEle = containerRef.current;\n        if (onHighlightKeyword && highlightEle) {\n            onHighlightKeyword({\n                highlightEle: highlightEle,\n                keyword: area.keyword,\n            });\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-search__highlight\", \"data-index\": index, ref: containerRef, style: getCssProperties(area), title: area.keywordStr.trim() }));\n};\n\nvar removeNode = function (ele) {\n    var parent = ele.parentNode;\n    if (parent) {\n        parent.removeChild(ele);\n    }\n};\nvar replaceNode = function (replacementNode, node) {\n    removeNode(replacementNode);\n    var parent = node.parentNode;\n    if (parent) {\n        parent.insertBefore(replacementNode, node);\n    }\n    removeNode(node);\n};\nvar unwrap = function (ele) {\n    var parent = ele.parentNode;\n    if (!parent) {\n        return;\n    }\n    var range = document.createRange();\n    range.selectNodeContents(ele);\n    replaceNode(range.extractContents(), ele);\n    parent.normalize();\n};\n\nvar sortHighlightPosition = function (a, b) {\n    if (a.top < b.top) {\n        return -1;\n    }\n    if (a.top > b.top) {\n        return 1;\n    }\n    if (a.left < b.left) {\n        return -1;\n    }\n    if (a.left > b.left) {\n        return 1;\n    }\n    return 0;\n};\nvar Highlights = function (_a) {\n    var numPages = _a.numPages, pageIndex = _a.pageIndex, renderHighlights = _a.renderHighlights, store = _a.store, onHighlightKeyword = _a.onHighlightKeyword;\n    var containerRef = React__namespace.useRef();\n    var defaultRenderHighlights = React__namespace.useCallback(function (renderProps) { return (React__namespace.createElement(React__namespace.Fragment, null, renderProps.highlightAreas.map(function (area, index) { return (React__namespace.createElement(HightlightItem, { index: index, key: index, area: area, onHighlightKeyword: onHighlightKeyword })); }))); }, []);\n    var renderHighlightElements = renderHighlights || defaultRenderHighlights;\n    var _b = React__namespace.useState(store.get('matchPosition')), matchPosition = _b[0], setMatchPosition = _b[1];\n    var _c = React__namespace.useState(store.get('keyword') || [EMPTY_KEYWORD_REGEXP]), keywordRegexp = _c[0], setKeywordRegexp = _c[1];\n    var _d = React__namespace.useState({\n        pageIndex: pageIndex,\n        scale: 1,\n        status: core.LayerRenderStatus.PreRender,\n    }), renderStatus = _d[0], setRenderStatus = _d[1];\n    var currentMatchRef = React__namespace.useRef(null);\n    var characterIndexesRef = React__namespace.useRef([]);\n    var _e = React__namespace.useState([]), highlightAreas = _e[0], setHighlightAreas = _e[1];\n    var defaultTargetPageFilter = function () { return true; };\n    var targetPageFilter = React__namespace.useCallback(function () { return store.get('targetPageFilter') || defaultTargetPageFilter; }, [store.get('targetPageFilter')]);\n    var highlight = function (keywordStr, keyword, textLayerEle, span, charIndexSpan) {\n        var range = document.createRange();\n        var firstChild = span.firstChild;\n        if (!firstChild || firstChild.nodeType !== Node.TEXT_NODE) {\n            return null;\n        }\n        var length = firstChild.textContent.length;\n        var startOffset = charIndexSpan[0].charIndexInSpan;\n        var endOffset = charIndexSpan.length === 1 ? startOffset : charIndexSpan[charIndexSpan.length - 1].charIndexInSpan;\n        if (startOffset > length || endOffset + 1 > length) {\n            return null;\n        }\n        range.setStart(firstChild, startOffset);\n        range.setEnd(firstChild, endOffset + 1);\n        var wrapper = document.createElement('span');\n        range.surroundContents(wrapper);\n        var wrapperRect = wrapper.getBoundingClientRect();\n        var textLayerRect = textLayerEle.getBoundingClientRect();\n        var pageHeight = textLayerRect.height;\n        var pageWidth = textLayerRect.width;\n        var left = (100 * (wrapperRect.left - textLayerRect.left)) / pageWidth;\n        var top = (100 * (wrapperRect.top - textLayerRect.top)) / pageHeight;\n        var height = (100 * wrapperRect.height) / pageHeight;\n        var width = (100 * wrapperRect.width) / pageWidth;\n        unwrap(wrapper);\n        return {\n            keyword: keyword,\n            keywordStr: keywordStr,\n            numPages: numPages,\n            pageIndex: pageIndex,\n            left: left,\n            top: top,\n            height: height,\n            width: width,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n        };\n    };\n    var highlightAll = function (textLayerEle) {\n        var charIndexes = characterIndexesRef.current;\n        if (charIndexes.length === 0) {\n            return [];\n        }\n        var highlightPos = [];\n        var spans = [].slice.call(textLayerEle.querySelectorAll('.rpv-core__text-layer-text'));\n        var fullText = charIndexes.map(function (item) { return item.char; }).join('');\n        keywordRegexp.forEach(function (keyword) {\n            var keywordStr = keyword.keyword;\n            if (!keywordStr.trim()) {\n                return;\n            }\n            var cloneKeyword = keyword.regExp.flags.indexOf('g') === -1\n                ? new RegExp(keyword.regExp, \"\".concat(keyword.regExp.flags, \"g\"))\n                : keyword.regExp;\n            var match;\n            var matches = [];\n            while ((match = cloneKeyword.exec(fullText)) !== null) {\n                matches.push({\n                    keyword: cloneKeyword,\n                    startIndex: match.index,\n                    endIndex: cloneKeyword.lastIndex,\n                });\n            }\n            matches\n                .map(function (item) { return ({\n                keyword: item.keyword,\n                indexes: charIndexes.slice(item.startIndex, item.endIndex),\n            }); })\n                .forEach(function (item) {\n                var spanIndexes = item.indexes.reduce(function (acc, item) {\n                    acc[item.spanIndex] = (acc[item.spanIndex] || []).concat([item]);\n                    return acc;\n                }, {});\n                Object.values(spanIndexes).forEach(function (charIndexSpan) {\n                    if (charIndexSpan.length !== 1 || charIndexSpan[0].char.trim() !== '') {\n                        var normalizedCharSpan = keyword.wholeWords ? charIndexSpan.slice(1, -1) : charIndexSpan;\n                        var hightlighPosition = highlight(keywordStr, item.keyword, textLayerEle, spans[normalizedCharSpan[0].spanIndex], normalizedCharSpan);\n                        if (hightlighPosition) {\n                            highlightPos.push(hightlighPosition);\n                        }\n                    }\n                });\n            });\n        });\n        return highlightPos.sort(sortHighlightPosition);\n    };\n    var handleKeywordChanged = function (keyword) {\n        if (keyword && keyword.length > 0) {\n            setKeywordRegexp(keyword);\n        }\n    };\n    var handleMatchPositionChanged = function (currentPosition) { return setMatchPosition(currentPosition); };\n    var handleRenderStatusChanged = function (status) {\n        if (!status.has(pageIndex)) {\n            return;\n        }\n        var currentStatus = status.get(pageIndex);\n        if (currentStatus) {\n            setRenderStatus({\n                ele: currentStatus.ele,\n                pageIndex: pageIndex,\n                scale: currentStatus.scale,\n                status: currentStatus.status,\n            });\n        }\n    };\n    var isEmptyKeyword = function () {\n        return keywordRegexp.length === 0 || (keywordRegexp.length === 1 && keywordRegexp[0].keyword.trim() === '');\n    };\n    React__namespace.useEffect(function () {\n        if (isEmptyKeyword() ||\n            renderStatus.status !== core.LayerRenderStatus.DidRender ||\n            characterIndexesRef.current.length) {\n            return;\n        }\n        var textLayerEle = renderStatus.ele;\n        var spans = [].slice.call(textLayerEle.querySelectorAll('.rpv-core__text-layer-text'));\n        var charIndexes = spans\n            .map(function (span) { return span.textContent; })\n            .reduce(function (prev, curr, index) {\n            return prev.concat(curr.split('').map(function (c, i) { return ({\n                char: c,\n                charIndexInSpan: i,\n                spanIndex: index,\n            }); }));\n        }, [\n            {\n                char: '',\n                charIndexInSpan: 0,\n                spanIndex: 0,\n            },\n        ])\n            .slice(1);\n        characterIndexesRef.current = charIndexes;\n    }, [keywordRegexp, renderStatus.status]);\n    React__namespace.useEffect(function () {\n        if (isEmptyKeyword() ||\n            !renderStatus.ele ||\n            renderStatus.status !== core.LayerRenderStatus.DidRender ||\n            !targetPageFilter()({ pageIndex: pageIndex, numPages: numPages })) {\n            return;\n        }\n        var textLayerEle = renderStatus.ele;\n        var highlightPos = highlightAll(textLayerEle);\n        setHighlightAreas(highlightPos);\n    }, [keywordRegexp, matchPosition, renderStatus.status, characterIndexesRef.current]);\n    React__namespace.useEffect(function () {\n        if (isEmptyKeyword() && renderStatus.ele && renderStatus.status === core.LayerRenderStatus.DidRender) {\n            setHighlightAreas([]);\n        }\n    }, [keywordRegexp, renderStatus.status]);\n    React__namespace.useEffect(function () {\n        if (highlightAreas.length === 0) {\n            return;\n        }\n        var container = containerRef.current;\n        if (matchPosition.pageIndex !== pageIndex ||\n            !container ||\n            renderStatus.status !== core.LayerRenderStatus.DidRender) {\n            return;\n        }\n        var highlightEle = container.querySelector(\".rpv-search__highlight[data-index=\\\"\".concat(matchPosition.matchIndex, \"\\\"]\"));\n        if (!highlightEle) {\n            return;\n        }\n        var _a = calculateOffset(highlightEle, container), left = _a.left, top = _a.top;\n        var jump = store.get('jumpToDestination');\n        if (jump) {\n            jump({\n                pageIndex: pageIndex,\n                bottomOffset: (container.getBoundingClientRect().height - top) / renderStatus.scale,\n                leftOffset: left / renderStatus.scale,\n                scaleTo: renderStatus.scale,\n            });\n            if (currentMatchRef.current) {\n                currentMatchRef.current.classList.remove('rpv-search__highlight--current');\n            }\n            currentMatchRef.current = highlightEle;\n            highlightEle.classList.add('rpv-search__highlight--current');\n        }\n    }, [highlightAreas, matchPosition]);\n    React__namespace.useEffect(function () {\n        store.subscribe('keyword', handleKeywordChanged);\n        store.subscribe('matchPosition', handleMatchPositionChanged);\n        store.subscribe('renderStatus', handleRenderStatusChanged);\n        return function () {\n            store.unsubscribe('keyword', handleKeywordChanged);\n            store.unsubscribe('matchPosition', handleMatchPositionChanged);\n            store.unsubscribe('renderStatus', handleRenderStatusChanged);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-search__highlights\", \"data-testid\": \"search__highlights-\".concat(pageIndex), ref: containerRef }, renderHighlightElements({\n        getCssProperties: getCssProperties,\n        highlightAreas: highlightAreas,\n    })));\n};\n\nvar escapeRegExp = function (input) { return input.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); };\nvar normalizeFlagKeyword = function (flagKeyword) {\n    var source = flagKeyword.wholeWords ? \" \".concat(flagKeyword.keyword, \" \") : flagKeyword.keyword;\n    var flags = flagKeyword.matchCase ? 'g' : 'gi';\n    return {\n        keyword: flagKeyword.keyword,\n        regExp: new RegExp(escapeRegExp(source), flags),\n        wholeWords: flagKeyword.wholeWords || false,\n    };\n};\nvar normalizeSingleKeyword = function (keyword, matchCase, wholeWords) {\n    if (keyword instanceof RegExp) {\n        return {\n            keyword: keyword.source,\n            regExp: keyword,\n            wholeWords: wholeWords || false,\n        };\n    }\n    if (typeof keyword === 'string') {\n        return keyword === ''\n            ? EMPTY_KEYWORD_REGEXP\n            : normalizeFlagKeyword({\n                keyword: keyword,\n                matchCase: matchCase || false,\n                wholeWords: wholeWords || false,\n            });\n    }\n    if (typeof matchCase !== 'undefined') {\n        keyword.matchCase = matchCase;\n    }\n    if (typeof wholeWords !== 'undefined') {\n        keyword.wholeWords = wholeWords;\n    }\n    return normalizeFlagKeyword(keyword);\n};\n\nvar useDocument = function (store) {\n    var currentDocRef = React__namespace.useRef(store.get('doc'));\n    var handleDocumentChanged = function (doc) {\n        currentDocRef.current = doc;\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return currentDocRef;\n};\n\nvar useSearch = function (store) {\n    var initialKeyword = store.get('initialKeyword');\n    var normalizedKeywordFlags = React__namespace.useMemo(function () {\n        if (initialKeyword && initialKeyword.length === 1) {\n            var normalizedKeyword = normalizeSingleKeyword(initialKeyword[0]);\n            return {\n                matchCase: normalizedKeyword.regExp.flags.indexOf('i') === -1,\n                wholeWords: normalizedKeyword.wholeWords,\n            };\n        }\n        else {\n            return {\n                matchCase: false,\n                wholeWords: false,\n            };\n        }\n    }, []);\n    var currentDocRef = useDocument(store);\n    var _a = React__namespace.useState(initialKeyword), keywords = _a[0], setKeywords = _a[1];\n    var _b = React__namespace.useState([]), found = _b[0], setFound = _b[1];\n    var _c = React__namespace.useState(0), currentMatch = _c[0], setCurrentMatch = _c[1];\n    var _d = React__namespace.useState(normalizedKeywordFlags.matchCase), matchCase = _d[0], setMatchCase = _d[1];\n    var textContents = React__namespace.useRef([]);\n    var _e = React__namespace.useState(normalizedKeywordFlags.wholeWords), wholeWords = _e[0], setWholeWords = _e[1];\n    var defaultTargetPageFilter = function () { return true; };\n    var targetPageFilter = React__namespace.useCallback(function () { return store.get('targetPageFilter') || defaultTargetPageFilter; }, [store.get('targetPageFilter')]);\n    var changeMatchCase = function (isChecked) {\n        setMatchCase(isChecked);\n        if (keywords.length > 0) {\n            searchFor(keywords, isChecked, wholeWords);\n        }\n    };\n    var changeWholeWords = function (isChecked) {\n        setWholeWords(isChecked);\n        if (keywords.length > 0) {\n            searchFor(keywords, matchCase, isChecked);\n        }\n    };\n    var jumpToMatch = function (index) {\n        var numMatches = found.length;\n        if (keywords.length === 0 || numMatches === 0) {\n            return null;\n        }\n        var normalizedIndex = index === numMatches + 1 ? 1 : Math.max(1, Math.min(numMatches, index));\n        setCurrentMatch(normalizedIndex);\n        return jumpToGivenMatch(found[normalizedIndex - 1]);\n    };\n    var jumpToPreviousMatch = function () { return jumpToMatch(currentMatch - 1); };\n    var jumpToNextMatch = function () { return jumpToMatch(currentMatch + 1); };\n    var clearKeyword = function () {\n        store.update('keyword', [EMPTY_KEYWORD_REGEXP]);\n        setKeyword('');\n        setCurrentMatch(0);\n        setFound([]);\n        setMatchCase(false);\n        setWholeWords(false);\n    };\n    var search = function () { return searchFor(keywords, matchCase, wholeWords); };\n    var setKeyword = function (keyword) { return setKeywords(keyword === '' ? [] : [keyword]); };\n    var setTargetPages = function (targetPageFilter) {\n        store.update('targetPageFilter', targetPageFilter);\n    };\n    var getTextContents = function () {\n        var currentDoc = currentDocRef.current;\n        if (!currentDoc) {\n            return Promise.resolve([]);\n        }\n        var promises = Array(currentDoc.numPages)\n            .fill(0)\n            .map(function (_, pageIndex) {\n            return core.getPage(currentDoc, pageIndex)\n                .then(function (page) {\n                return page.getTextContent();\n            })\n                .then(function (content) {\n                var pageContent = content.items.map(function (item) { return item.str || ''; }).join('');\n                return Promise.resolve({\n                    pageContent: pageContent,\n                    pageIndex: pageIndex,\n                });\n            });\n        });\n        return Promise.all(promises).then(function (data) {\n            data.sort(function (a, b) { return a.pageIndex - b.pageIndex; });\n            return Promise.resolve(data.map(function (item) { return item.pageContent; }));\n        });\n    };\n    var jumpToGivenMatch = function (match) {\n        var jumpToPage = store.get('jumpToPage');\n        if (jumpToPage) {\n            jumpToPage(match.pageIndex);\n        }\n        store.update('matchPosition', {\n            matchIndex: match.matchIndex,\n            pageIndex: match.pageIndex,\n        });\n        return match;\n    };\n    var getKeywordSource = function (keyword) {\n        if (keyword instanceof RegExp) {\n            return keyword.source;\n        }\n        if (typeof keyword === 'string') {\n            return keyword;\n        }\n        return keyword.keyword;\n    };\n    var searchFor = function (keywordParam, matchCaseParam, wholeWordsParam) {\n        var currentDoc = currentDocRef.current;\n        if (!currentDoc) {\n            return Promise.resolve([]);\n        }\n        var numPages = currentDoc.numPages;\n        var keywords = keywordParam.map(function (k) { return normalizeSingleKeyword(k, matchCaseParam, wholeWordsParam); });\n        store.update('keyword', keywords);\n        setCurrentMatch(0);\n        setFound([]);\n        return new Promise(function (resolve, _) {\n            var getTextPromise = textContents.current.length === 0\n                ? getTextContents().then(function (response) {\n                    textContents.current = response;\n                    return Promise.resolve(response);\n                })\n                : Promise.resolve(textContents.current);\n            getTextPromise.then(function (response) {\n                var arr = [];\n                response.forEach(function (pageText, pageIndex) {\n                    if (targetPageFilter()({ pageIndex: pageIndex, numPages: numPages })) {\n                        keywords.forEach(function (keyword) {\n                            var matchIndex = 0;\n                            var matches;\n                            while ((matches = keyword.regExp.exec(pageText)) !== null) {\n                                arr.push({\n                                    keyword: keyword.regExp,\n                                    matchIndex: matchIndex,\n                                    pageIndex: pageIndex,\n                                    pageText: pageText,\n                                    startIndex: matches.index,\n                                    endIndex: keyword.regExp.lastIndex,\n                                });\n                                matchIndex++;\n                            }\n                        });\n                    }\n                });\n                setFound(arr);\n                if (arr.length > 0) {\n                    setCurrentMatch(1);\n                    jumpToGivenMatch(arr[0]);\n                }\n                resolve(arr);\n            });\n        });\n    };\n    React__namespace.useEffect(function () {\n        textContents.current = [];\n    }, [currentDocRef.current]);\n    return {\n        clearKeyword: clearKeyword,\n        changeMatchCase: changeMatchCase,\n        changeWholeWords: changeWholeWords,\n        currentMatch: currentMatch,\n        jumpToMatch: jumpToMatch,\n        jumpToNextMatch: jumpToNextMatch,\n        jumpToPreviousMatch: jumpToPreviousMatch,\n        keywords: keywords,\n        matchCase: matchCase,\n        numberOfMatches: found.length,\n        wholeWords: wholeWords,\n        search: search,\n        searchFor: searchFor,\n        setKeywords: setKeywords,\n        keyword: keywords.length === 0 ? '' : getKeywordSource(keywords[0]),\n        setKeyword: setKeyword,\n        setTargetPages: setTargetPages,\n    };\n};\n\nvar Search = function (_a) {\n    var children = _a.children, store = _a.store;\n    var result = useSearch(store);\n    var _b = React__namespace.useState(false), isDocumentLoaded = _b[0], setDocumentLoaded = _b[1];\n    var handleDocumentChanged = function (_) { return setDocumentLoaded(true); };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return children(__assign(__assign({}, result), { isDocumentLoaded: isDocumentLoaded }));\n};\n\nvar ShortcutHandler = function (_a) {\n    var containerRef = _a.containerRef, store = _a.store;\n    var isMouseInsideRef = React__namespace.useRef(false);\n    var handleMouseEnter = function () {\n        isMouseInsideRef.current = true;\n    };\n    var handleMouseLeave = function () {\n        isMouseInsideRef.current = false;\n    };\n    var handleKeydown = function (e) {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        if (e.shiftKey || e.altKey || e.key !== 'f') {\n            return;\n        }\n        var isCommandPressed = core.isMac() ? e.metaKey && !e.ctrlKey : e.ctrlKey;\n        if (!isCommandPressed) {\n            return;\n        }\n        if (isMouseInsideRef.current || (document.activeElement && containerEle.contains(document.activeElement))) {\n            e.preventDefault();\n            store.update('areShortcutsPressed', true);\n        }\n    };\n    React__namespace.useEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        document.addEventListener('keydown', handleKeydown);\n        containerEle.addEventListener('mouseenter', handleMouseEnter);\n        containerEle.addEventListener('mouseleave', handleMouseLeave);\n        return function () {\n            document.removeEventListener('keydown', handleKeydown);\n            containerEle.removeEventListener('mouseenter', handleMouseEnter);\n            containerEle.removeEventListener('mouseleave', handleMouseLeave);\n        };\n    }, [containerRef.current]);\n    return React__namespace.createElement(React__namespace.Fragment, null);\n};\n\nvar PORTAL_OFFSET$1 = { left: 0, top: 8 };\nvar SearchPopover = function (_a) {\n    var store = _a.store, onToggle = _a.onToggle;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var _b = React__namespace.useState(false), isQuerying = _b[0], setIsQuerying = _b[1];\n    var _c = React__namespace.useState(false), searchDone = _c[0], setSearchDone = _c[1];\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var _d = useSearch(store), clearKeyword = _d.clearKeyword, changeMatchCase = _d.changeMatchCase, changeWholeWords = _d.changeWholeWords, currentMatch = _d.currentMatch, jumpToNextMatch = _d.jumpToNextMatch, jumpToPreviousMatch = _d.jumpToPreviousMatch, keyword = _d.keyword, matchCase = _d.matchCase, numberOfMatches = _d.numberOfMatches, wholeWords = _d.wholeWords, search = _d.search, setKeyword = _d.setKeyword;\n    var performSearch = function (cb) {\n        setIsQuerying(true);\n        search().then(function (_) {\n            setIsQuerying(false);\n            setSearchDone(true);\n            cb && cb();\n        });\n    };\n    var onKeydownSearch = function (e) {\n        if (e.key === 'Enter' && keyword) {\n            searchDone ? jumpToNextMatch() : performSearch();\n        }\n    };\n    var onChangeMatchCase = function (e) {\n        setSearchDone(false);\n        changeMatchCase(e.target.checked);\n    };\n    var onChangeWholeWords = function (e) {\n        setSearchDone(false);\n        changeWholeWords(e.target.checked);\n    };\n    var onClose = function () {\n        onToggle();\n        clearKeyword();\n    };\n    var onChangeKeyword = function (value) {\n        setSearchDone(false);\n        setKeyword(value);\n    };\n    React__namespace.useEffect(function () {\n        var initialKeyword = store.get('initialKeyword');\n        if (initialKeyword && initialKeyword.length === 1 && keyword) {\n            performSearch(function () {\n                store.update('initialKeyword', []);\n            });\n        }\n    }, []);\n    var searchLabel = l10n && l10n.search ? l10n.search.enterToSearch : 'Enter to search';\n    var previousMatchLabel = l10n && l10n.search ? l10n.search.previousMatch : 'Previous match';\n    var nextMatchLabel = l10n && l10n.search ? l10n.search.nextMatch : 'Next match';\n    var closeButtonLabel = l10n && l10n.search ? l10n.search.close : 'Close';\n    return (React__namespace.createElement(\"div\", { className: \"rpv-search__popover\" },\n        React__namespace.createElement(\"div\", { className: \"rpv-search__popover-input-counter\" },\n            React__namespace.createElement(core.TextBox, { ariaLabel: searchLabel, autoFocus: true, placeholder: searchLabel, type: \"text\", value: keyword, onChange: onChangeKeyword, onKeyDown: onKeydownSearch }),\n            React__namespace.createElement(\"div\", { className: core.classNames({\n                    'rpv-search__popover-counter': true,\n                    'rpv-search__popover-counter--ltr': !isRtl,\n                    'rpv-search__popover-counter--rtl': isRtl,\n                }) },\n                isQuerying && React__namespace.createElement(core.Spinner, { testId: \"search__popover-searching\", size: \"1rem\" }),\n                !isQuerying && (React__namespace.createElement(\"span\", { \"data-testid\": \"search__popover-num-matches\" },\n                    currentMatch,\n                    \"/\",\n                    numberOfMatches)))),\n        React__namespace.createElement(\"label\", { className: \"rpv-search__popover-label\" },\n            React__namespace.createElement(\"input\", { className: \"rpv-search__popover-label-checkbox\", \"data-testid\": \"search__popover-match-case\", checked: matchCase, type: \"checkbox\", onChange: onChangeMatchCase }),\n            ' ',\n            l10n && l10n.search ? l10n.search.matchCase : 'Match case'),\n        React__namespace.createElement(\"label\", { className: \"rpv-search__popover-label\" },\n            React__namespace.createElement(\"input\", { className: \"rpv-search__popover-label-checkbox\", checked: wholeWords, \"data-testid\": \"search__popover-whole-words\", type: \"checkbox\", onChange: onChangeWholeWords }),\n            ' ',\n            l10n && l10n.search ? l10n.search.wholeWords : 'Whole words'),\n        React__namespace.createElement(\"div\", { className: \"rpv-search__popover-footer\" },\n            React__namespace.createElement(\"div\", { className: \"rpv-search__popover-footer-item\" },\n                React__namespace.createElement(core.Tooltip, { ariaControlsSuffix: \"search-previous-match\", position: isRtl ? core.Position.BottomRight : core.Position.BottomCenter, target: React__namespace.createElement(core.MinimalButton, { ariaLabel: previousMatchLabel, isDisabled: currentMatch <= 1, onClick: jumpToPreviousMatch },\n                        React__namespace.createElement(PreviousIcon, null)), content: function () { return previousMatchLabel; }, offset: PORTAL_OFFSET$1 })),\n            React__namespace.createElement(\"div\", { className: \"rpv-search__popover-footer-item\" },\n                React__namespace.createElement(core.Tooltip, { ariaControlsSuffix: \"search-next-match\", position: core.Position.BottomCenter, target: React__namespace.createElement(core.MinimalButton, { ariaLabel: nextMatchLabel, isDisabled: currentMatch > numberOfMatches - 1, onClick: jumpToNextMatch },\n                        React__namespace.createElement(NextIcon, null)), content: function () { return nextMatchLabel; }, offset: PORTAL_OFFSET$1 })),\n            React__namespace.createElement(\"div\", { className: core.classNames({\n                    'rpv-search__popover-footer-button': true,\n                    'rpv-search__popover-footer-button--ltr': !isRtl,\n                    'rpv-search__popover-footer-button--rtl': isRtl,\n                }) },\n                React__namespace.createElement(core.Button, { onClick: onClose }, closeButtonLabel)))));\n};\n\nvar ShowSearchPopoverDecorator = function (_a) {\n    var children = _a.children, onClick = _a.onClick;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var label = l10n && l10n.search ? l10n.search.search : 'Search';\n    var icon = React__namespace.createElement(SearchIcon, null);\n    return children({ icon: icon, label: label, onClick: onClick });\n};\n\nvar TOOLTIP_OFFSET = { left: 0, top: 8 };\nvar ShowSearchPopoverButton = function (_a) {\n    var enableShortcuts = _a.enableShortcuts, store = _a.store, onClick = _a.onClick;\n    var ariaKeyShortcuts = enableShortcuts ? (core.isMac() ? 'Meta+F' : 'Ctrl+F') : '';\n    var handleShortcutsPressed = function (areShortcutsPressed) {\n        if (areShortcutsPressed) {\n            onClick();\n        }\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('areShortcutsPressed', handleShortcutsPressed);\n        return function () {\n            store.unsubscribe('areShortcutsPressed', handleShortcutsPressed);\n        };\n    }, []);\n    return (React__namespace.createElement(ShowSearchPopoverDecorator, { onClick: onClick }, function (p) { return (React__namespace.createElement(core.Tooltip, { ariaControlsSuffix: \"search-popover\", position: core.Position.BottomCenter, target: React__namespace.createElement(core.MinimalButton, { ariaKeyShortcuts: ariaKeyShortcuts, ariaLabel: p.label, testId: \"search__popover-button\", onClick: onClick }, p.icon), content: function () { return p.label; }, offset: TOOLTIP_OFFSET })); }));\n};\n\nvar PORTAL_OFFSET = { left: 0, top: 8 };\nvar ShowSearchPopover = function (_a) {\n    var children = _a.children, enableShortcuts = _a.enableShortcuts, store = _a.store;\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var portalPosition = direction === core.TextDirection.RightToLeft ? core.Position.BottomRight : core.Position.BottomLeft;\n    var defaultChildren = function (props) { return (React__namespace.createElement(ShowSearchPopoverButton, __assign({ enableShortcuts: enableShortcuts, store: store }, props))); };\n    var render = children || defaultChildren;\n    return (React__namespace.createElement(core.Popover, { ariaControlsSuffix: \"search\", lockScroll: false, position: portalPosition, target: function (toggle) {\n            return render({\n                onClick: toggle,\n            });\n        }, content: function (toggle) { return React__namespace.createElement(SearchPopover, { store: store, onToggle: toggle }); }, offset: PORTAL_OFFSET, closeOnClickOutside: false, closeOnEscape: true }));\n};\n\nvar normalizeKeywords = function (keyword) {\n    return Array.isArray(keyword) ? keyword.map(function (k) { return normalizeSingleKeyword(k); }) : [normalizeSingleKeyword(keyword)];\n};\nvar searchPlugin = function (props) {\n    var searchPluginProps = React__namespace.useMemo(function () { return Object.assign({}, { enableShortcuts: true, onHighlightKeyword: function () { } }, props); }, []);\n    var store = React__namespace.useMemo(function () {\n        return core.createStore({\n            initialKeyword: props && props.keyword ? (Array.isArray(props.keyword) ? props.keyword : [props.keyword]) : [],\n            keyword: props && props.keyword ? normalizeKeywords(props.keyword) : [EMPTY_KEYWORD_REGEXP],\n            matchPosition: {\n                matchIndex: -1,\n                pageIndex: -1,\n            },\n            renderStatus: new Map(),\n        });\n    }, []);\n    var _a = useSearch(store), clearKeyword = _a.clearKeyword, jumpToMatch = _a.jumpToMatch, jumpToNextMatch = _a.jumpToNextMatch, jumpToPreviousMatch = _a.jumpToPreviousMatch, searchFor = _a.searchFor, setKeywords = _a.setKeywords, setTargetPages = _a.setTargetPages;\n    var SearchDecorator = function (props) { return React__namespace.createElement(Search, __assign({}, props, { store: store })); };\n    var ShowSearchPopoverDecorator = function (props) { return (React__namespace.createElement(ShowSearchPopover, __assign({ enableShortcuts: searchPluginProps.enableShortcuts }, props, { store: store }))); };\n    var ShowSearchPopoverButtonDecorator = function () { return (React__namespace.createElement(ShowSearchPopoverDecorator, null, function (props) { return (React__namespace.createElement(ShowSearchPopoverButton, __assign({ enableShortcuts: searchPluginProps.enableShortcuts, store: store }, props))); })); };\n    var renderViewer = function (renderViewerProps) {\n        var currentSlot = renderViewerProps.slot;\n        if (currentSlot.subSlot) {\n            currentSlot.subSlot.children = (React__namespace.createElement(React__namespace.Fragment, null,\n                searchPluginProps.enableShortcuts && (React__namespace.createElement(ShortcutHandler, { containerRef: renderViewerProps.containerRef, store: store })),\n                currentSlot.subSlot.children));\n        }\n        return currentSlot;\n    };\n    var renderPageLayer = function (renderProps) { return (React__namespace.createElement(Highlights, { key: renderProps.pageIndex, numPages: renderProps.doc.numPages, pageIndex: renderProps.pageIndex, renderHighlights: props === null || props === void 0 ? void 0 : props.renderHighlights, store: store, onHighlightKeyword: searchPluginProps.onHighlightKeyword })); };\n    return {\n        install: function (pluginFunctions) {\n            var initialKeyword = props && props.keyword ? (Array.isArray(props.keyword) ? props.keyword : [props.keyword]) : [];\n            var keyword = props && props.keyword ? normalizeKeywords(props.keyword) : [EMPTY_KEYWORD_REGEXP];\n            store.update('initialKeyword', initialKeyword);\n            store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n            store.update('jumpToPage', pluginFunctions.jumpToPage);\n            store.update('keyword', keyword);\n        },\n        renderPageLayer: renderPageLayer,\n        renderViewer: renderViewer,\n        uninstall: function (props) {\n            var renderStatus = store.get('renderStatus');\n            if (renderStatus) {\n                renderStatus.clear();\n            }\n        },\n        onDocumentLoad: function (props) {\n            store.update('doc', props.doc);\n        },\n        onTextLayerRender: function (props) {\n            var renderStatus = store.get('renderStatus');\n            if (renderStatus) {\n                renderStatus = renderStatus.set(props.pageIndex, props);\n                store.update('renderStatus', renderStatus);\n            }\n        },\n        Search: SearchDecorator,\n        ShowSearchPopover: ShowSearchPopoverDecorator,\n        ShowSearchPopoverButton: ShowSearchPopoverButtonDecorator,\n        clearHighlights: function () {\n            clearKeyword();\n        },\n        highlight: function (keyword) {\n            var keywords = Array.isArray(keyword) ? keyword : [keyword];\n            setKeywords(keywords);\n            return searchFor(keywords);\n        },\n        jumpToMatch: jumpToMatch,\n        jumpToNextMatch: jumpToNextMatch,\n        jumpToPreviousMatch: jumpToPreviousMatch,\n        setTargetPages: setTargetPages,\n    };\n};\n\nexports.NextIcon = NextIcon;\nexports.PreviousIcon = PreviousIcon;\nexports.SearchIcon = SearchIcon;\nexports.searchPlugin = searchPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}