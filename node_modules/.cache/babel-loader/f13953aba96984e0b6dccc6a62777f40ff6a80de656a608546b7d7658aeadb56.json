{"ast":null,"code":"'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n.default = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\nexports.ThumbnailDirection = void 0;\n(function (ThumbnailDirection) {\n  ThumbnailDirection[\"Horizontal\"] = \"Horizontal\";\n  ThumbnailDirection[\"Vertical\"] = \"Vertical\";\n})(exports.ThumbnailDirection || (exports.ThumbnailDirection = {}));\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar CoverInner = function (_a) {\n  var doc = _a.doc,\n    getPageIndex = _a.getPageIndex,\n    renderSpinner = _a.renderSpinner,\n    store = _a.store,\n    width = _a.width;\n  var numPages = doc.numPages;\n  var targetPage = getPageIndex ? getPageIndex({\n    numPages: numPages\n  }) : 0;\n  var normalizePage = Math.max(0, Math.min(targetPage, numPages - 1));\n  var initialPagesRotation = store.get('pagesRotation') || new Map();\n  var initialTargetPageRotation = initialPagesRotation.has(normalizePage) ? initialPagesRotation.get(normalizePage) : 0;\n  var _b = React__namespace.useState(''),\n    src = _b[0],\n    setSrc = _b[1];\n  var isMounted = core.useIsMounted();\n  var renderTask = React__namespace.useRef();\n  var _c = React__namespace.useState(store.get('rotation') || 0),\n    rotation = _c[0],\n    setRotation = _c[1];\n  var _d = React__namespace.useState(initialTargetPageRotation),\n    pageRotation = _d[0],\n    setPageRotation = _d[1];\n  var _e = React__namespace.useState(false),\n    isVisible = _e[0],\n    setVisible = _e[1];\n  var handlePagesRotationChanged = function (rotations) {\n    var pageRotation = rotations.has(normalizePage) ? rotations.get(normalizePage) : 0;\n    setPageRotation(pageRotation);\n  };\n  var handleRotationChanged = function (currentRotation) {\n    setRotation(currentRotation);\n  };\n  var handleVisibilityChanged = function (params) {\n    setVisible(params.isVisible);\n  };\n  var containerRef = core.useIntersectionObserver({\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  React__namespace.useEffect(function () {\n    if (!isVisible) {\n      return;\n    }\n    var containerEle = containerRef.current;\n    if (!containerEle) {\n      return;\n    }\n    setSrc('');\n    core.getPage(doc, normalizePage).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var viewportRotation = viewport.rotation;\n      var rotationValue = (viewportRotation + rotation + pageRotation) % 360;\n      var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n      var w = isVertical ? viewport.width : viewport.height;\n      var h = isVertical ? viewport.height : viewport.width;\n      var canvas = document.createElement('canvas');\n      var canvasContext = canvas.getContext('2d', {\n        alpha: false\n      });\n      var containerWidth = containerEle.clientWidth;\n      var containerHeight = containerEle.clientHeight;\n      var scaled = width ? width / w : Math.min(containerWidth / w, containerHeight / h);\n      var canvasWidth = scaled * w;\n      var canvasHeight = scaled * h;\n      canvas.height = canvasHeight;\n      canvas.width = canvasWidth;\n      canvas.style.opacity = '0';\n      var renderViewport = page.getViewport({\n        rotation: rotationValue,\n        scale: scaled\n      });\n      renderTask.current = page.render({\n        canvasContext: canvasContext,\n        viewport: renderViewport\n      });\n      renderTask.current.promise.then(function () {\n        isMounted.current && setSrc(canvas.toDataURL());\n        canvas.width = 0;\n        canvas.height = 0;\n      }, function () {});\n    });\n  }, [pageRotation, isVisible]);\n  React__namespace.useEffect(function () {\n    store.subscribe('pagesRotation', handlePagesRotationChanged);\n    store.subscribe('rotation', handleRotationChanged);\n    return function () {\n      store.unsubscribe('pagesRotation', handlePagesRotationChanged);\n      store.unsubscribe('rotation', handleRotationChanged);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    return function () {\n      var _a;\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-thumbnail__cover-inner\",\n    \"data-testid\": \"thumbnail__cover-inner\"\n  }, src ? React__namespace.createElement(\"img\", {\n    className: \"rpv-thumbnail__cover-image\",\n    \"data-testid\": \"thumbnail__cover-image\",\n    src: src\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover-loader\",\n    \"data-testid\": \"thumbnail__cover-loader\"\n  }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)));\n};\nvar Cover = function (_a) {\n  var getPageIndex = _a.getPageIndex,\n    renderSpinner = _a.renderSpinner,\n    store = _a.store,\n    width = _a.width;\n  var _b = React__namespace.useState(store.get('doc')),\n    currentDoc = _b[0],\n    setCurrentDoc = _b[1];\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover\"\n  }, currentDoc ? React__namespace.createElement(CoverInner, {\n    doc: currentDoc,\n    getPageIndex: getPageIndex,\n    renderSpinner: renderSpinner,\n    store: store,\n    width: width\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover-loader\"\n  }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)));\n};\nvar defaultSpinner = function () {\n  return React__namespace.createElement(core.Spinner, null);\n};\nvar SpinnerContext = React__namespace.createContext({\n  renderSpinner: defaultSpinner\n});\nvar FetchLabels = function (_a) {\n  var children = _a.children,\n    doc = _a.doc;\n  var isMounted = core.useIsMounted();\n  var _b = React__namespace.useState({\n      loading: true,\n      labels: []\n    }),\n    status = _b[0],\n    setStatus = _b[1];\n  React__namespace.useEffect(function () {\n    doc.getPageLabels().then(function (result) {\n      isMounted.current && setStatus({\n        loading: false,\n        labels: result || []\n      });\n    });\n  }, [doc.loadingTask.docId]);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : children(status.labels);\n};\nvar scrollToBeVisibleVertically = function (ele, container) {\n  var top = ele.getBoundingClientRect().top - container.getBoundingClientRect().top;\n  var eleHeight = ele.clientHeight;\n  var containerHeight = container.clientHeight;\n  if (top < 0) {\n    container.scrollTop += top;\n    return;\n  }\n  if (top + eleHeight <= containerHeight) {\n    return;\n  }\n  container.scrollTop += top + eleHeight - containerHeight;\n};\nvar scrollToBeVisibleHorizontally = function (ele, container) {\n  var left = ele.getBoundingClientRect().left - container.getBoundingClientRect().left;\n  var eleWidth = ele.clientWidth;\n  var containerWidth = container.clientWidth;\n  if (left < 0) {\n    container.scrollLeft += left;\n    return;\n  }\n  if (left + eleWidth <= containerWidth) {\n    return;\n  }\n  container.scrollLeft += left + eleWidth - containerWidth;\n};\nvar ThumbnailItem = function (_a) {\n  var page = _a.page,\n    pageHeight = _a.pageHeight,\n    pageIndex = _a.pageIndex,\n    pageWidth = _a.pageWidth,\n    rotation = _a.rotation,\n    thumbnailHeight = _a.thumbnailHeight,\n    thumbnailWidth = _a.thumbnailWidth,\n    onRenderCompleted = _a.onRenderCompleted;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var renderTask = React__namespace.useRef();\n  var _b = React__namespace.useState(''),\n    src = _b[0],\n    setSrc = _b[1];\n  var thumbnailLabel = l10n && l10n.thumbnail ? l10n.thumbnail.thumbnailLabel : 'Thumbnail of page {{pageIndex}}';\n  React__namespace.useEffect(function () {\n    var task = renderTask.current;\n    if (task) {\n      task.cancel();\n    }\n    var canvas = document.createElement('canvas');\n    var canvasContext = canvas.getContext('2d', {\n      alpha: false\n    });\n    var w = thumbnailWidth;\n    var h = w / (pageWidth / pageHeight);\n    var scale = w / pageWidth;\n    canvas.height = h;\n    canvas.width = w;\n    canvas.style.height = \"\".concat(h, \"px\");\n    canvas.style.width = \"\".concat(w, \"px\");\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      setSrc(canvas.toDataURL());\n      onRenderCompleted(pageIndex);\n    }, function () {\n      onRenderCompleted(pageIndex);\n    });\n    return function () {\n      var _a;\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, [rotation]);\n  return !src ? React__namespace.useContext(SpinnerContext).renderSpinner() : React__namespace.createElement(\"img\", {\n    \"aria-label\": thumbnailLabel.replace('{{pageIndex}}', \"\".concat(pageIndex + 1)),\n    src: src,\n    height: \"\".concat(thumbnailHeight, \"px\"),\n    width: \"\".concat(thumbnailWidth, \"px\")\n  });\n};\nvar ThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n    pageHeight = _a.pageHeight,\n    pageIndex = _a.pageIndex,\n    pageRotation = _a.pageRotation,\n    pageWidth = _a.pageWidth,\n    rotation = _a.rotation,\n    shouldRender = _a.shouldRender,\n    thumbnailWidth = _a.thumbnailWidth,\n    onRenderCompleted = _a.onRenderCompleted,\n    onVisibilityChanged = _a.onVisibilityChanged;\n  var isMounted = core.useIsMounted();\n  var _b = React__namespace.useState({\n      height: pageHeight,\n      page: null,\n      viewportRotation: 0,\n      width: pageWidth\n    }),\n    pageSize = _b[0],\n    setPageSize = _b[1];\n  var page = pageSize.page,\n    height = pageSize.height,\n    width = pageSize.width;\n  var scale = width / height;\n  var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n  var w = isVertical ? thumbnailWidth : thumbnailWidth / scale;\n  var h = isVertical ? thumbnailWidth / scale : thumbnailWidth;\n  React__namespace.useEffect(function () {\n    if (shouldRender) {\n      core.getPage(doc, pageIndex).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        isMounted.current && setPageSize({\n          height: viewport.height,\n          page: pdfPage,\n          viewportRotation: viewport.rotation,\n          width: viewport.width\n        });\n      });\n    }\n  }, [shouldRender]);\n  var rotationNumber = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n  var containerRef = core.useIntersectionObserver({\n    onVisibilityChanged: function (visibility) {\n      onVisibilityChanged(pageIndex, visibility);\n    }\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__container\",\n    \"data-testid\": \"thumbnail__container-\".concat(pageIndex),\n    ref: containerRef,\n    style: {\n      height: \"\".concat(h, \"px\"),\n      width: \"\".concat(w, \"px\")\n    }\n  }, !page ? React__namespace.useContext(SpinnerContext).renderSpinner() : React__namespace.createElement(ThumbnailItem, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageIndex: pageIndex,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    thumbnailHeight: h,\n    thumbnailWidth: w,\n    onRenderCompleted: onRenderCompleted\n  }));\n};\nvar ThumbnailList = function (_a) {\n  var currentPage = _a.currentPage,\n    doc = _a.doc,\n    labels = _a.labels,\n    pagesRotation = _a.pagesRotation,\n    pageHeight = _a.pageHeight,\n    pageWidth = _a.pageWidth,\n    renderCurrentPageLabel = _a.renderCurrentPageLabel,\n    renderThumbnailItem = _a.renderThumbnailItem,\n    rotatedPage = _a.rotatedPage,\n    rotation = _a.rotation,\n    thumbnailDirection = _a.thumbnailDirection,\n    thumbnailWidth = _a.thumbnailWidth,\n    viewMode = _a.viewMode,\n    onJumpToPage = _a.onJumpToPage,\n    onRotatePage = _a.onRotatePage;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var containerRef = React__namespace.useRef(null);\n  var thumbnailsRef = React__namespace.useRef([]);\n  var _b = React__namespace.useState(currentPage),\n    currentFocused = _b[0],\n    setCurrentFocused = _b[1];\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var _c = React__namespace.useState(-1),\n    renderPageIndex = _c[0],\n    setRenderPageIndex = _c[1];\n  var isMounted = core.useIsMounted();\n  var previousViewMode = core.usePrevious(viewMode);\n  var hasRenderingThumbnailRef = React__namespace.useRef(false);\n  var renderQueue = core.useRenderQueue({\n    doc: doc\n  });\n  var pageIndexes = React__namespace.useMemo(function () {\n    return Array(numPages).fill(0).map(function (_, pageIndex) {\n      return pageIndex;\n    });\n  }, [docId]);\n  var chunks = React__namespace.useMemo(function () {\n    switch (viewMode) {\n      case core.ViewMode.DualPage:\n        return core.chunk(pageIndexes, 2);\n      case core.ViewMode.DualPageWithCover:\n        return [[pageIndexes[0]]].concat(core.chunk(pageIndexes.slice(1), 2));\n      case core.ViewMode.SinglePage:\n      default:\n        return core.chunk(pageIndexes, 1);\n    }\n  }, [docId, viewMode]);\n  var handleKeyDown = function (e) {\n    switch (e.key) {\n      case 'ArrowDown':\n        activateNextItem();\n        break;\n      case 'ArrowUp':\n        activatePreviousItem();\n        break;\n      case 'Enter':\n        jumpToFocusedPage();\n        break;\n    }\n  };\n  var activateNextItem = function () {\n    var container = containerRef.current;\n    if (!container) {\n      return;\n    }\n    var items = thumbnailsRef.current;\n    var nextItem = currentFocused + 1;\n    if (nextItem < items.length) {\n      if (currentFocused >= 0) {\n        items[currentFocused].setAttribute('tabindex', '-1');\n      }\n      setCurrentFocused(nextItem);\n    }\n  };\n  var activatePreviousItem = function () {\n    var container = containerRef.current;\n    if (!container) {\n      return;\n    }\n    var items = thumbnailsRef.current;\n    var prevItem = currentFocused - 1;\n    if (prevItem >= 0) {\n      if (currentFocused >= 0) {\n        items[currentFocused].setAttribute('tabindex', '-1');\n      }\n      setCurrentFocused(prevItem);\n    }\n  };\n  var jumpToFocusedPage = function () {\n    if (currentFocused >= 0 && currentFocused < numPages) {\n      onJumpToPage(currentFocused);\n    }\n  };\n  core.useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n    if (!container) {\n      return;\n    }\n    thumbnailsRef.current = Array.from(container.querySelectorAll('.rpv-thumbnail__item'));\n  }, [viewMode]);\n  React__namespace.useEffect(function () {\n    var thumbnails = thumbnailsRef.current;\n    if (thumbnails.length === 0 || currentFocused < 0 || currentFocused > thumbnails.length) {\n      return;\n    }\n    var thumbnailEle = thumbnails[currentFocused];\n    thumbnailEle.setAttribute('tabindex', '0');\n    thumbnailEle.focus();\n  }, [currentFocused]);\n  core.useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n    var thumbnails = thumbnailsRef.current;\n    if (!container || thumbnails.length === 0 || currentPage < 0 || currentPage > thumbnails.length) {\n      return;\n    }\n    var thumbnailContainer = thumbnails[currentPage].closest('.rpv-thumbnail__items');\n    if (thumbnailContainer) {\n      thumbnailDirection === exports.ThumbnailDirection.Vertical ? scrollToBeVisibleVertically(thumbnailContainer, container) : scrollToBeVisibleHorizontally(thumbnailContainer, container);\n    }\n  }, [currentPage, thumbnailDirection]);\n  var handleRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n    if (isMounted.current) {\n      renderQueue.markRendered(pageIndex);\n      hasRenderingThumbnailRef.current = false;\n      renderNextThumbnail();\n    }\n  }, [docId]);\n  var handleVisibilityChanged = React__namespace.useCallback(function (pageIndex, visibility) {\n    visibility.isVisible ? renderQueue.setVisibility(pageIndex, visibility.ratio) : renderQueue.setOutOfRange(pageIndex);\n    renderNextThumbnail();\n  }, [docId]);\n  var renderNextThumbnail = React__namespace.useCallback(function () {\n    if (hasRenderingThumbnailRef.current) {\n      return;\n    }\n    var nextPage = renderQueue.getHighestPriorityPage();\n    if (nextPage > -1) {\n      renderQueue.markRendering(nextPage);\n      hasRenderingThumbnailRef.current = true;\n      setRenderPageIndex(nextPage);\n    }\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    if (rotatedPage >= 0) {\n      renderQueue.markRendering(rotatedPage);\n      hasRenderingThumbnailRef.current = true;\n      setRenderPageIndex(rotatedPage);\n    }\n  }, [docId, rotatedPage]);\n  core.useIsomorphicLayoutEffect(function () {\n    if (previousViewMode !== viewMode) {\n      renderQueue.markNotRendered();\n      renderNextThumbnail();\n    }\n  }, [viewMode]);\n  var renderPageThumbnail = function (pageIndex) {\n    var isCover = viewMode === core.ViewMode.DualPageWithCover && (pageIndex === 0 || numPages % 2 === 0 && pageIndex === numPages - 1);\n    var key = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n    var pageLabel = labels.length === numPages ? labels[pageIndex] : \"\".concat(pageIndex + 1);\n    var label = renderCurrentPageLabel ? renderCurrentPageLabel({\n      currentPage: currentPage,\n      pageIndex: pageIndex,\n      numPages: numPages,\n      pageLabel: pageLabel\n    }) : pageLabel;\n    var pageRotation = pagesRotation.has(pageIndex) ? pagesRotation.get(pageIndex) : 0;\n    var thumbnail = React__namespace.createElement(ThumbnailContainer, {\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: pageIndex,\n      pageRotation: pageRotation,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      shouldRender: renderPageIndex === pageIndex,\n      thumbnailWidth: thumbnailWidth,\n      onRenderCompleted: handleRenderCompleted,\n      onVisibilityChanged: handleVisibilityChanged\n    });\n    return renderThumbnailItem ? renderThumbnailItem({\n      currentPage: currentPage,\n      key: key,\n      numPages: numPages,\n      pageIndex: pageIndex,\n      renderPageLabel: React__namespace.createElement(React__namespace.Fragment, null, label),\n      renderPageThumbnail: thumbnail,\n      onJumpToPage: function () {\n        return onJumpToPage(pageIndex);\n      },\n      onRotatePage: function (direction) {\n        return onRotatePage(pageIndex, direction);\n      }\n    }) : React__namespace.createElement(\"div\", {\n      key: key\n    }, React__namespace.createElement(\"div\", {\n      className: core.classNames({\n        'rpv-thumbnail__item': true,\n        'rpv-thumbnail__item--dual-even': viewMode === core.ViewMode.DualPage && pageIndex % 2 === 0,\n        'rpv-thumbnail__item--dual-odd': viewMode === core.ViewMode.DualPage && pageIndex % 2 === 1,\n        'rpv-thumbnail__item--dual-cover': isCover,\n        'rpv-thumbnail__item--dual-cover-even': viewMode === core.ViewMode.DualPageWithCover && !isCover && pageIndex % 2 === 0,\n        'rpv-thumbnail__item--dual-cover-odd': viewMode === core.ViewMode.DualPageWithCover && !isCover && pageIndex % 2 === 1,\n        'rpv-thumbnail__item--single': viewMode === core.ViewMode.SinglePage,\n        'rpv-thumbnail__item--selected': currentPage === pageIndex\n      }),\n      role: \"button\",\n      tabIndex: currentPage === pageIndex ? 0 : -1,\n      onClick: function () {\n        return onJumpToPage(pageIndex);\n      }\n    }, thumbnail), React__namespace.createElement(\"div\", {\n      \"data-testid\": \"thumbnail__label-\".concat(pageIndex),\n      className: \"rpv-thumbnail__label\"\n    }, label));\n  };\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    \"data-testid\": \"thumbnail__list\",\n    className: core.classNames({\n      'rpv-thumbnail__list': true,\n      'rpv-thumbnail__list--horizontal': thumbnailDirection === exports.ThumbnailDirection.Horizontal,\n      'rpv-thumbnail__list--rtl': isRtl,\n      'rpv-thumbnail__list--vertical': thumbnailDirection === exports.ThumbnailDirection.Vertical\n    }),\n    onKeyDown: handleKeyDown\n  }, chunks.map(function (chunkItem, index) {\n    var isSelectedChunk = false;\n    switch (viewMode) {\n      case core.ViewMode.DualPage:\n        isSelectedChunk = currentPage === 2 * index || currentPage === 2 * index + 1;\n        break;\n      case core.ViewMode.DualPageWithCover:\n        isSelectedChunk = currentPage === 0 && index === 0 || index > 0 && currentPage === 2 * index - 1 || index > 0 && currentPage === 2 * index;\n        break;\n      case core.ViewMode.SinglePage:\n      default:\n        isSelectedChunk = currentPage === index;\n        break;\n    }\n    return React__namespace.createElement(\"div\", {\n      className: core.classNames({\n        'rpv-thumbnail__items': true,\n        'rpv-thumbnail__items--dual': viewMode === core.ViewMode.DualPage,\n        'rpv-thumbnail__items--dual-cover': viewMode === core.ViewMode.DualPageWithCover,\n        'rpv-thumbnail__items--single': viewMode === core.ViewMode.SinglePage,\n        'rpv-thumbnail__items--selected': isSelectedChunk\n      }),\n      key: \"\".concat(index, \"___\").concat(viewMode)\n    }, chunkItem.map(function (pageIndex) {\n      return renderPageThumbnail(pageIndex);\n    }));\n  }));\n};\nvar ThumbnailListWithStore = function (_a) {\n  var renderCurrentPageLabel = _a.renderCurrentPageLabel,\n    renderThumbnailItem = _a.renderThumbnailItem,\n    store = _a.store,\n    thumbnailDirection = _a.thumbnailDirection,\n    thumbnailWidth = _a.thumbnailWidth;\n  var _b = React__namespace.useState(store.get('doc')),\n    currentDoc = _b[0],\n    setCurrentDoc = _b[1];\n  var _c = React__namespace.useState(store.get('currentPage') || 0),\n    currentPage = _c[0],\n    setCurrentPage = _c[1];\n  var _d = React__namespace.useState(store.get('pageHeight') || 0),\n    pageHeight = _d[0],\n    setPageHeight = _d[1];\n  var _e = React__namespace.useState(store.get('pageWidth') || 0),\n    pageWidth = _e[0],\n    setPageWidth = _e[1];\n  var _f = React__namespace.useState(store.get('rotation') || 0),\n    rotation = _f[0],\n    setRotation = _f[1];\n  var _g = React__namespace.useState(store.get('pagesRotation') || new Map()),\n    pagesRotation = _g[0],\n    setPagesRotation = _g[1];\n  var _h = React__namespace.useState(store.get('rotatedPage') || -1),\n    rotatedPage = _h[0],\n    setRotatedPage = _h[1];\n  var _j = React__namespace.useState(store.get('viewMode')),\n    viewMode = _j[0],\n    setViewMode = _j[1];\n  var handleCurrentPageChanged = function (currentPageIndex) {\n    setCurrentPage(currentPageIndex);\n  };\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n  var handlePageHeightChanged = function (height) {\n    setPageHeight(height);\n  };\n  var handlePageWidthChanged = function (width) {\n    setPageWidth(width);\n  };\n  var handleRotationChanged = function (currentRotation) {\n    setRotation(currentRotation);\n  };\n  var handlePagesRotationChanged = function (rotations) {\n    setPagesRotation(rotations);\n  };\n  var handleRotatedPage = function (rotatedPage) {\n    setRotatedPage(rotatedPage);\n  };\n  var handleViewModeChanged = function (viewMode) {\n    setViewMode(viewMode);\n  };\n  var jump = function (pageIndex) {\n    var jumpToPage = store.get('jumpToPage');\n    if (jumpToPage) {\n      jumpToPage(pageIndex);\n    }\n  };\n  var rotatePage = function (pageIndex, direction) {\n    store.get('rotatePage')(pageIndex, direction);\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    store.subscribe('pageHeight', handlePageHeightChanged);\n    store.subscribe('pageWidth', handlePageWidthChanged);\n    store.subscribe('rotatedPage', handleRotatedPage);\n    store.subscribe('rotation', handleRotationChanged);\n    store.subscribe('pagesRotation', handlePagesRotationChanged);\n    store.subscribe('viewMode', handleViewModeChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n      store.unsubscribe('pageHeight', handlePageHeightChanged);\n      store.unsubscribe('pageWidth', handlePageWidthChanged);\n      store.unsubscribe('rotatedPage', handleRotatedPage);\n      store.unsubscribe('rotation', handleRotationChanged);\n      store.unsubscribe('pagesRotation', handlePagesRotationChanged);\n      store.unsubscribe('viewMode', handleViewModeChanged);\n    };\n  }, []);\n  core.useIsomorphicLayoutEffect(function () {\n    store.subscribe('currentPage', handleCurrentPageChanged);\n    return function () {\n      store.unsubscribe('currentPage', handleCurrentPageChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(core.LazyRender, {\n    testId: \"thumbnail__list-container\",\n    attrs: {\n      className: 'rpv-thumbnail__list-container'\n    }\n  }, React__namespace.createElement(FetchLabels, {\n    doc: currentDoc\n  }, function (labels) {\n    return React__namespace.createElement(ThumbnailList, {\n      currentPage: currentPage,\n      doc: currentDoc,\n      labels: labels,\n      pagesRotation: pagesRotation,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      renderCurrentPageLabel: renderCurrentPageLabel,\n      renderThumbnailItem: renderThumbnailItem,\n      rotatedPage: rotatedPage,\n      rotation: rotation,\n      thumbnailDirection: thumbnailDirection,\n      thumbnailWidth: thumbnailWidth,\n      viewMode: viewMode,\n      onJumpToPage: jump,\n      onRotatePage: rotatePage\n    });\n  })) : React__namespace.createElement(\"div\", {\n    \"data-testid\": \"thumbnail-list__loader\",\n    className: \"rpv-thumbnail__loader\"\n  }, React__namespace.useContext(SpinnerContext).renderSpinner());\n};\nvar thumbnailPlugin = function (pluginProps) {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      rotatePage: function () {},\n      viewMode: core.ViewMode.SinglePage\n    });\n  }, []);\n  var _a = React__namespace.useState(''),\n    docId = _a[0],\n    setDocId = _a[1];\n  var CoverDecorator = function (props) {\n    return React__namespace.createElement(Cover, __assign({}, props, {\n      renderSpinner: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner,\n      store: store\n    }));\n  };\n  var ThumbnailsDecorator = React__namespace.useCallback(function (props) {\n    return React__namespace.createElement(SpinnerContext.Provider, {\n      value: {\n        renderSpinner: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner) || defaultSpinner\n      }\n    }, React__namespace.createElement(ThumbnailListWithStore, {\n      renderCurrentPageLabel: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderCurrentPageLabel,\n      renderThumbnailItem: props === null || props === void 0 ? void 0 : props.renderThumbnailItem,\n      store: store,\n      thumbnailDirection: (props === null || props === void 0 ? void 0 : props.thumbnailDirection) || exports.ThumbnailDirection.Vertical,\n      thumbnailWidth: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.thumbnailWidth) || 100\n    }));\n  }, [docId]);\n  return {\n    install: function (pluginFunctions) {\n      store.update('jumpToPage', pluginFunctions.jumpToPage);\n      store.update('rotatePage', pluginFunctions.rotatePage);\n    },\n    onDocumentLoad: function (props) {\n      setDocId(props.doc.loadingTask.docId);\n      store.update('doc', props.doc);\n    },\n    onViewerStateChange: function (viewerState) {\n      store.update('currentPage', viewerState.pageIndex);\n      store.update('pagesRotation', viewerState.pagesRotation);\n      store.update('pageHeight', viewerState.pageHeight);\n      store.update('pageWidth', viewerState.pageWidth);\n      store.update('rotation', viewerState.rotation);\n      store.update('rotatedPage', viewerState.rotatedPage);\n      store.update('viewMode', viewerState.viewMode);\n      return viewerState;\n    },\n    Cover: CoverDecorator,\n    Thumbnails: ThumbnailsDecorator\n  };\n};\nexports.thumbnailPlugin = thumbnailPlugin;","map":{"version":3,"names":["core","require","React","_interopNamespaceDefault","e","n","Object","create","keys","forEach","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","default","freeze","React__namespace","exports","ThumbnailDirection","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","CoverInner","_a","doc","getPageIndex","renderSpinner","store","width","numPages","targetPage","normalizePage","Math","max","min","initialPagesRotation","Map","initialTargetPageRotation","has","_b","useState","src","setSrc","isMounted","useIsMounted","renderTask","useRef","_c","rotation","setRotation","_d","pageRotation","setPageRotation","_e","isVisible","setVisible","handlePagesRotationChanged","rotations","handleRotationChanged","currentRotation","handleVisibilityChanged","params","containerRef","useIntersectionObserver","onVisibilityChanged","useEffect","containerEle","current","getPage","then","page","viewport","getViewport","scale","viewportRotation","rotationValue","isVertical","abs","w","height","h","canvas","document","createElement","canvasContext","getContext","alpha","containerWidth","clientWidth","containerHeight","clientHeight","scaled","canvasWidth","canvasHeight","style","opacity","renderViewport","render","promise","toDataURL","subscribe","unsubscribe","cancel","ref","className","Spinner","Cover","currentDoc","setCurrentDoc","handleDocumentChanged","defaultSpinner","SpinnerContext","createContext","FetchLabels","children","loading","labels","status","setStatus","getPageLabels","result","loadingTask","docId","Fragment","scrollToBeVisibleVertically","ele","container","top","getBoundingClientRect","eleHeight","scrollTop","scrollToBeVisibleHorizontally","left","eleWidth","scrollLeft","ThumbnailItem","pageHeight","pageIndex","pageWidth","thumbnailHeight","thumbnailWidth","onRenderCompleted","l10n","useContext","LocalizationContext","thumbnailLabel","thumbnail","task","concat","replace","ThumbnailContainer","shouldRender","pageSize","setPageSize","pdfPage","rotationNumber","visibility","ThumbnailList","currentPage","pagesRotation","renderCurrentPageLabel","renderThumbnailItem","rotatedPage","thumbnailDirection","viewMode","onJumpToPage","onRotatePage","thumbnailsRef","currentFocused","setCurrentFocused","direction","ThemeContext","isRtl","TextDirection","RightToLeft","renderPageIndex","setRenderPageIndex","previousViewMode","usePrevious","hasRenderingThumbnailRef","renderQueue","useRenderQueue","pageIndexes","useMemo","Array","fill","map","_","chunks","ViewMode","DualPage","chunk","DualPageWithCover","slice","SinglePage","handleKeyDown","key","activateNextItem","activatePreviousItem","jumpToFocusedPage","items","nextItem","setAttribute","prevItem","useIsomorphicLayoutEffect","from","querySelectorAll","thumbnails","thumbnailEle","focus","thumbnailContainer","closest","Vertical","handleRenderCompleted","useCallback","markRendered","renderNextThumbnail","setVisibility","ratio","setOutOfRange","nextPage","getHighestPriorityPage","markRendering","markNotRendered","renderPageThumbnail","isCover","pageLabel","label","renderPageLabel","classNames","role","tabIndex","onClick","Horizontal","onKeyDown","chunkItem","index","isSelectedChunk","ThumbnailListWithStore","setCurrentPage","setPageHeight","setPageWidth","_f","_g","setPagesRotation","_h","setRotatedPage","_j","setViewMode","handleCurrentPageChanged","currentPageIndex","handlePageHeightChanged","handlePageWidthChanged","handleRotatedPage","handleViewModeChanged","jump","jumpToPage","rotatePage","LazyRender","testId","attrs","thumbnailPlugin","pluginProps","createStore","setDocId","CoverDecorator","props","ThumbnailsDecorator","Provider","value","install","pluginFunctions","update","onDocumentLoad","onViewerStateChange","viewerState","Thumbnails"],"sources":["/Users/tuomasritola/Documents/Projects/examples/pdf-viewer-example/node_modules/@react-pdf-viewer/thumbnail/lib/cjs/thumbnail.js"],"sourcesContent":["'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\n\nfunction _interopNamespaceDefault(e) {\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n.default = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\n\nexports.ThumbnailDirection = void 0;\n(function (ThumbnailDirection) {\n    ThumbnailDirection[\"Horizontal\"] = \"Horizontal\";\n    ThumbnailDirection[\"Vertical\"] = \"Vertical\";\n})(exports.ThumbnailDirection || (exports.ThumbnailDirection = {}));\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar CoverInner = function (_a) {\n    var doc = _a.doc, getPageIndex = _a.getPageIndex, renderSpinner = _a.renderSpinner, store = _a.store, width = _a.width;\n    var numPages = doc.numPages;\n    var targetPage = getPageIndex ? getPageIndex({ numPages: numPages }) : 0;\n    var normalizePage = Math.max(0, Math.min(targetPage, numPages - 1));\n    var initialPagesRotation = store.get('pagesRotation') || new Map();\n    var initialTargetPageRotation = initialPagesRotation.has(normalizePage)\n        ? initialPagesRotation.get(normalizePage)\n        : 0;\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    var isMounted = core.useIsMounted();\n    var renderTask = React__namespace.useRef();\n    var _c = React__namespace.useState(store.get('rotation') || 0), rotation = _c[0], setRotation = _c[1];\n    var _d = React__namespace.useState(initialTargetPageRotation), pageRotation = _d[0], setPageRotation = _d[1];\n    var _e = React__namespace.useState(false), isVisible = _e[0], setVisible = _e[1];\n    var handlePagesRotationChanged = function (rotations) {\n        var pageRotation = rotations.has(normalizePage) ? rotations.get(normalizePage) : 0;\n        setPageRotation(pageRotation);\n    };\n    var handleRotationChanged = function (currentRotation) {\n        setRotation(currentRotation);\n    };\n    var handleVisibilityChanged = function (params) {\n        setVisible(params.isVisible);\n    };\n    var containerRef = core.useIntersectionObserver({\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    React__namespace.useEffect(function () {\n        if (!isVisible) {\n            return;\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        setSrc('');\n        core.getPage(doc, normalizePage).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var viewportRotation = viewport.rotation;\n            var rotationValue = (viewportRotation + rotation + pageRotation) % 360;\n            var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n            var w = isVertical ? viewport.width : viewport.height;\n            var h = isVertical ? viewport.height : viewport.width;\n            var canvas = document.createElement('canvas');\n            var canvasContext = canvas.getContext('2d', { alpha: false });\n            var containerWidth = containerEle.clientWidth;\n            var containerHeight = containerEle.clientHeight;\n            var scaled = width ? width / w : Math.min(containerWidth / w, containerHeight / h);\n            var canvasWidth = scaled * w;\n            var canvasHeight = scaled * h;\n            canvas.height = canvasHeight;\n            canvas.width = canvasWidth;\n            canvas.style.opacity = '0';\n            var renderViewport = page.getViewport({\n                rotation: rotationValue,\n                scale: scaled,\n            });\n            renderTask.current = page.render({ canvasContext: canvasContext, viewport: renderViewport });\n            renderTask.current.promise.then(function () {\n                isMounted.current && setSrc(canvas.toDataURL());\n                canvas.width = 0;\n                canvas.height = 0;\n            }, function () {\n            });\n        });\n    }, [pageRotation, isVisible]);\n    React__namespace.useEffect(function () {\n        store.subscribe('pagesRotation', handlePagesRotationChanged);\n        store.subscribe('rotation', handleRotationChanged);\n        return function () {\n            store.unsubscribe('pagesRotation', handlePagesRotationChanged);\n            store.unsubscribe('rotation', handleRotationChanged);\n        };\n    }, []);\n    React__namespace.useEffect(function () {\n        return function () {\n            var _a;\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-thumbnail__cover-inner\", \"data-testid\": \"thumbnail__cover-inner\" }, src ? (React__namespace.createElement(\"img\", { className: \"rpv-thumbnail__cover-image\", \"data-testid\": \"thumbnail__cover-image\", src: src })) : (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover-loader\", \"data-testid\": \"thumbnail__cover-loader\" }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)))));\n};\n\nvar Cover = function (_a) {\n    var getPageIndex = _a.getPageIndex, renderSpinner = _a.renderSpinner, store = _a.store, width = _a.width;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover\" }, currentDoc ? (React__namespace.createElement(CoverInner, { doc: currentDoc, getPageIndex: getPageIndex, renderSpinner: renderSpinner, store: store, width: width })) : (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover-loader\" }, renderSpinner ? renderSpinner() : React__namespace.createElement(core.Spinner, null)))));\n};\n\nvar defaultSpinner = function () { return React__namespace.createElement(core.Spinner, null); };\nvar SpinnerContext = React__namespace.createContext({\n    renderSpinner: defaultSpinner,\n});\n\nvar FetchLabels = function (_a) {\n    var children = _a.children, doc = _a.doc;\n    var isMounted = core.useIsMounted();\n    var _b = React__namespace.useState({\n        loading: true,\n        labels: [],\n    }), status = _b[0], setStatus = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getPageLabels().then(function (result) {\n            isMounted.current && setStatus({ loading: false, labels: result || [] });\n        });\n    }, [doc.loadingTask.docId]);\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : children(status.labels);\n};\n\nvar scrollToBeVisibleVertically = function (ele, container) {\n    var top = ele.getBoundingClientRect().top - container.getBoundingClientRect().top;\n    var eleHeight = ele.clientHeight;\n    var containerHeight = container.clientHeight;\n    if (top < 0) {\n        container.scrollTop += top;\n        return;\n    }\n    if (top + eleHeight <= containerHeight) {\n        return;\n    }\n    container.scrollTop += top + eleHeight - containerHeight;\n};\nvar scrollToBeVisibleHorizontally = function (ele, container) {\n    var left = ele.getBoundingClientRect().left - container.getBoundingClientRect().left;\n    var eleWidth = ele.clientWidth;\n    var containerWidth = container.clientWidth;\n    if (left < 0) {\n        container.scrollLeft += left;\n        return;\n    }\n    if (left + eleWidth <= containerWidth) {\n        return;\n    }\n    container.scrollLeft += left + eleWidth - containerWidth;\n};\n\nvar ThumbnailItem = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, thumbnailHeight = _a.thumbnailHeight, thumbnailWidth = _a.thumbnailWidth, onRenderCompleted = _a.onRenderCompleted;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    var thumbnailLabel = l10n && l10n.thumbnail\n        ? l10n.thumbnail.thumbnailLabel\n        : 'Thumbnail of page {{pageIndex}}';\n    React__namespace.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var canvasContext = canvas.getContext('2d', { alpha: false });\n        var w = thumbnailWidth;\n        var h = w / (pageWidth / pageHeight);\n        var scale = w / pageWidth;\n        canvas.height = h;\n        canvas.width = w;\n        canvas.style.height = \"\".concat(h, \"px\");\n        canvas.style.width = \"\".concat(w, \"px\");\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            setSrc(canvas.toDataURL());\n            onRenderCompleted(pageIndex);\n        }, function () {\n            onRenderCompleted(pageIndex);\n        });\n        return function () {\n            var _a;\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        };\n    }, [rotation]);\n    return !src ? (React__namespace.useContext(SpinnerContext).renderSpinner()) : (React__namespace.createElement(\"img\", { \"aria-label\": thumbnailLabel.replace('{{pageIndex}}', \"\".concat(pageIndex + 1)), src: src, height: \"\".concat(thumbnailHeight, \"px\"), width: \"\".concat(thumbnailWidth, \"px\") }));\n};\n\nvar ThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageRotation = _a.pageRotation, pageWidth = _a.pageWidth, rotation = _a.rotation, shouldRender = _a.shouldRender, thumbnailWidth = _a.thumbnailWidth, onRenderCompleted = _a.onRenderCompleted, onVisibilityChanged = _a.onVisibilityChanged;\n    var isMounted = core.useIsMounted();\n    var _b = React__namespace.useState({\n        height: pageHeight,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var scale = width / height;\n    var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n    var w = isVertical ? thumbnailWidth : thumbnailWidth / scale;\n    var h = isVertical ? thumbnailWidth / scale : thumbnailWidth;\n    React__namespace.useEffect(function () {\n        if (shouldRender) {\n            core.getPage(doc, pageIndex).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                isMounted.current &&\n                    setPageSize({\n                        height: viewport.height,\n                        page: pdfPage,\n                        viewportRotation: viewport.rotation,\n                        width: viewport.width,\n                    });\n            });\n        }\n    }, [shouldRender]);\n    var rotationNumber = (pageSize.viewportRotation + rotation + pageRotation) % 360;\n    var containerRef = core.useIntersectionObserver({\n        onVisibilityChanged: function (visibility) {\n            onVisibilityChanged(pageIndex, visibility);\n        },\n    });\n    return (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__container\", \"data-testid\": \"thumbnail__container-\".concat(pageIndex), ref: containerRef, style: {\n            height: \"\".concat(h, \"px\"),\n            width: \"\".concat(w, \"px\"),\n        } }, !page ? (React__namespace.useContext(SpinnerContext).renderSpinner()) : (React__namespace.createElement(ThumbnailItem, { page: page, pageHeight: isVertical ? height : width, pageIndex: pageIndex, pageWidth: isVertical ? width : height, rotation: rotationNumber, thumbnailHeight: h, thumbnailWidth: w, onRenderCompleted: onRenderCompleted }))));\n};\n\nvar ThumbnailList = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, labels = _a.labels, pagesRotation = _a.pagesRotation, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, renderCurrentPageLabel = _a.renderCurrentPageLabel, renderThumbnailItem = _a.renderThumbnailItem, rotatedPage = _a.rotatedPage, rotation = _a.rotation, thumbnailDirection = _a.thumbnailDirection, thumbnailWidth = _a.thumbnailWidth, viewMode = _a.viewMode, onJumpToPage = _a.onJumpToPage, onRotatePage = _a.onRotatePage;\n    var numPages = doc.numPages;\n    var docId = doc.loadingTask.docId;\n    var containerRef = React__namespace.useRef(null);\n    var thumbnailsRef = React__namespace.useRef([]);\n    var _b = React__namespace.useState(currentPage), currentFocused = _b[0], setCurrentFocused = _b[1];\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var _c = React__namespace.useState(-1), renderPageIndex = _c[0], setRenderPageIndex = _c[1];\n    var isMounted = core.useIsMounted();\n    var previousViewMode = core.usePrevious(viewMode);\n    var hasRenderingThumbnailRef = React__namespace.useRef(false);\n    var renderQueue = core.useRenderQueue({ doc: doc });\n    var pageIndexes = React__namespace.useMemo(function () {\n        return Array(numPages)\n            .fill(0)\n            .map(function (_, pageIndex) { return pageIndex; });\n    }, [docId]);\n    var chunks = React__namespace.useMemo(function () {\n        switch (viewMode) {\n            case core.ViewMode.DualPage:\n                return core.chunk(pageIndexes, 2);\n            case core.ViewMode.DualPageWithCover:\n                return [[pageIndexes[0]]].concat(core.chunk(pageIndexes.slice(1), 2));\n            case core.ViewMode.SinglePage:\n            default:\n                return core.chunk(pageIndexes, 1);\n        }\n    }, [docId, viewMode]);\n    var handleKeyDown = function (e) {\n        switch (e.key) {\n            case 'ArrowDown':\n                activateNextItem();\n                break;\n            case 'ArrowUp':\n                activatePreviousItem();\n                break;\n            case 'Enter':\n                jumpToFocusedPage();\n                break;\n        }\n    };\n    var activateNextItem = function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = thumbnailsRef.current;\n        var nextItem = currentFocused + 1;\n        if (nextItem < items.length) {\n            if (currentFocused >= 0) {\n                items[currentFocused].setAttribute('tabindex', '-1');\n            }\n            setCurrentFocused(nextItem);\n        }\n    };\n    var activatePreviousItem = function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = thumbnailsRef.current;\n        var prevItem = currentFocused - 1;\n        if (prevItem >= 0) {\n            if (currentFocused >= 0) {\n                items[currentFocused].setAttribute('tabindex', '-1');\n            }\n            setCurrentFocused(prevItem);\n        }\n    };\n    var jumpToFocusedPage = function () {\n        if (currentFocused >= 0 && currentFocused < numPages) {\n            onJumpToPage(currentFocused);\n        }\n    };\n    core.useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        thumbnailsRef.current = Array.from(container.querySelectorAll('.rpv-thumbnail__item'));\n    }, [viewMode]);\n    React__namespace.useEffect(function () {\n        var thumbnails = thumbnailsRef.current;\n        if (thumbnails.length === 0 || currentFocused < 0 || currentFocused > thumbnails.length) {\n            return;\n        }\n        var thumbnailEle = thumbnails[currentFocused];\n        thumbnailEle.setAttribute('tabindex', '0');\n        thumbnailEle.focus();\n    }, [currentFocused]);\n    core.useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        var thumbnails = thumbnailsRef.current;\n        if (!container || thumbnails.length === 0 || currentPage < 0 || currentPage > thumbnails.length) {\n            return;\n        }\n        var thumbnailContainer = thumbnails[currentPage].closest('.rpv-thumbnail__items');\n        if (thumbnailContainer) {\n            thumbnailDirection === exports.ThumbnailDirection.Vertical\n                ? scrollToBeVisibleVertically(thumbnailContainer, container)\n                : scrollToBeVisibleHorizontally(thumbnailContainer, container);\n        }\n    }, [currentPage, thumbnailDirection]);\n    var handleRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n        if (isMounted.current) {\n            renderQueue.markRendered(pageIndex);\n            hasRenderingThumbnailRef.current = false;\n            renderNextThumbnail();\n        }\n    }, [docId]);\n    var handleVisibilityChanged = React__namespace.useCallback(function (pageIndex, visibility) {\n        visibility.isVisible\n            ? renderQueue.setVisibility(pageIndex, visibility.ratio)\n            :\n                renderQueue.setOutOfRange(pageIndex);\n        renderNextThumbnail();\n    }, [docId]);\n    var renderNextThumbnail = React__namespace.useCallback(function () {\n        if (hasRenderingThumbnailRef.current) {\n            return;\n        }\n        var nextPage = renderQueue.getHighestPriorityPage();\n        if (nextPage > -1) {\n            renderQueue.markRendering(nextPage);\n            hasRenderingThumbnailRef.current = true;\n            setRenderPageIndex(nextPage);\n        }\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        if (rotatedPage >= 0) {\n            renderQueue.markRendering(rotatedPage);\n            hasRenderingThumbnailRef.current = true;\n            setRenderPageIndex(rotatedPage);\n        }\n    }, [docId, rotatedPage]);\n    core.useIsomorphicLayoutEffect(function () {\n        if (previousViewMode !== viewMode) {\n            renderQueue.markNotRendered();\n            renderNextThumbnail();\n        }\n    }, [viewMode]);\n    var renderPageThumbnail = function (pageIndex) {\n        var isCover = viewMode === core.ViewMode.DualPageWithCover &&\n            (pageIndex === 0 || (numPages % 2 === 0 && pageIndex === numPages - 1));\n        var key = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n        var pageLabel = labels.length === numPages ? labels[pageIndex] : \"\".concat(pageIndex + 1);\n        var label = renderCurrentPageLabel\n            ? renderCurrentPageLabel({ currentPage: currentPage, pageIndex: pageIndex, numPages: numPages, pageLabel: pageLabel })\n            : pageLabel;\n        var pageRotation = pagesRotation.has(pageIndex) ? pagesRotation.get(pageIndex) : 0;\n        var thumbnail = (React__namespace.createElement(ThumbnailContainer, { doc: doc, pageHeight: pageHeight, pageIndex: pageIndex, pageRotation: pageRotation, pageWidth: pageWidth, rotation: rotation, shouldRender: renderPageIndex === pageIndex, thumbnailWidth: thumbnailWidth, onRenderCompleted: handleRenderCompleted, onVisibilityChanged: handleVisibilityChanged }));\n        return renderThumbnailItem ? (renderThumbnailItem({\n            currentPage: currentPage,\n            key: key,\n            numPages: numPages,\n            pageIndex: pageIndex,\n            renderPageLabel: React__namespace.createElement(React__namespace.Fragment, null, label),\n            renderPageThumbnail: thumbnail,\n            onJumpToPage: function () { return onJumpToPage(pageIndex); },\n            onRotatePage: function (direction) { return onRotatePage(pageIndex, direction); },\n        })) : (React__namespace.createElement(\"div\", { key: key },\n            React__namespace.createElement(\"div\", { className: core.classNames({\n                    'rpv-thumbnail__item': true,\n                    'rpv-thumbnail__item--dual-even': viewMode === core.ViewMode.DualPage && pageIndex % 2 === 0,\n                    'rpv-thumbnail__item--dual-odd': viewMode === core.ViewMode.DualPage && pageIndex % 2 === 1,\n                    'rpv-thumbnail__item--dual-cover': isCover,\n                    'rpv-thumbnail__item--dual-cover-even': viewMode === core.ViewMode.DualPageWithCover && !isCover && pageIndex % 2 === 0,\n                    'rpv-thumbnail__item--dual-cover-odd': viewMode === core.ViewMode.DualPageWithCover && !isCover && pageIndex % 2 === 1,\n                    'rpv-thumbnail__item--single': viewMode === core.ViewMode.SinglePage,\n                    'rpv-thumbnail__item--selected': currentPage === pageIndex,\n                }), role: \"button\", tabIndex: currentPage === pageIndex ? 0 : -1, onClick: function () { return onJumpToPage(pageIndex); } }, thumbnail),\n            React__namespace.createElement(\"div\", { \"data-testid\": \"thumbnail__label-\".concat(pageIndex), className: \"rpv-thumbnail__label\" }, label)));\n    };\n    return (React__namespace.createElement(\"div\", { ref: containerRef, \"data-testid\": \"thumbnail__list\", className: core.classNames({\n            'rpv-thumbnail__list': true,\n            'rpv-thumbnail__list--horizontal': thumbnailDirection === exports.ThumbnailDirection.Horizontal,\n            'rpv-thumbnail__list--rtl': isRtl,\n            'rpv-thumbnail__list--vertical': thumbnailDirection === exports.ThumbnailDirection.Vertical,\n        }), onKeyDown: handleKeyDown }, chunks.map(function (chunkItem, index) {\n        var isSelectedChunk = false;\n        switch (viewMode) {\n            case core.ViewMode.DualPage:\n                isSelectedChunk = currentPage === 2 * index || currentPage === 2 * index + 1;\n                break;\n            case core.ViewMode.DualPageWithCover:\n                isSelectedChunk =\n                    (currentPage === 0 && index === 0) ||\n                        (index > 0 && currentPage === 2 * index - 1) ||\n                        (index > 0 && currentPage === 2 * index);\n                break;\n            case core.ViewMode.SinglePage:\n            default:\n                isSelectedChunk = currentPage === index;\n                break;\n        }\n        return (React__namespace.createElement(\"div\", { className: core.classNames({\n                'rpv-thumbnail__items': true,\n                'rpv-thumbnail__items--dual': viewMode === core.ViewMode.DualPage,\n                'rpv-thumbnail__items--dual-cover': viewMode === core.ViewMode.DualPageWithCover,\n                'rpv-thumbnail__items--single': viewMode === core.ViewMode.SinglePage,\n                'rpv-thumbnail__items--selected': isSelectedChunk,\n            }), key: \"\".concat(index, \"___\").concat(viewMode) }, chunkItem.map(function (pageIndex) { return renderPageThumbnail(pageIndex); })));\n    })));\n};\n\nvar ThumbnailListWithStore = function (_a) {\n    var renderCurrentPageLabel = _a.renderCurrentPageLabel, renderThumbnailItem = _a.renderThumbnailItem, store = _a.store, thumbnailDirection = _a.thumbnailDirection, thumbnailWidth = _a.thumbnailWidth;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var _c = React__namespace.useState(store.get('currentPage') || 0), currentPage = _c[0], setCurrentPage = _c[1];\n    var _d = React__namespace.useState(store.get('pageHeight') || 0), pageHeight = _d[0], setPageHeight = _d[1];\n    var _e = React__namespace.useState(store.get('pageWidth') || 0), pageWidth = _e[0], setPageWidth = _e[1];\n    var _f = React__namespace.useState(store.get('rotation') || 0), rotation = _f[0], setRotation = _f[1];\n    var _g = React__namespace.useState(store.get('pagesRotation') || new Map()), pagesRotation = _g[0], setPagesRotation = _g[1];\n    var _h = React__namespace.useState(store.get('rotatedPage') || -1), rotatedPage = _h[0], setRotatedPage = _h[1];\n    var _j = React__namespace.useState(store.get('viewMode')), viewMode = _j[0], setViewMode = _j[1];\n    var handleCurrentPageChanged = function (currentPageIndex) {\n        setCurrentPage(currentPageIndex);\n    };\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    var handlePageHeightChanged = function (height) {\n        setPageHeight(height);\n    };\n    var handlePageWidthChanged = function (width) {\n        setPageWidth(width);\n    };\n    var handleRotationChanged = function (currentRotation) {\n        setRotation(currentRotation);\n    };\n    var handlePagesRotationChanged = function (rotations) {\n        setPagesRotation(rotations);\n    };\n    var handleRotatedPage = function (rotatedPage) {\n        setRotatedPage(rotatedPage);\n    };\n    var handleViewModeChanged = function (viewMode) {\n        setViewMode(viewMode);\n    };\n    var jump = function (pageIndex) {\n        var jumpToPage = store.get('jumpToPage');\n        if (jumpToPage) {\n            jumpToPage(pageIndex);\n        }\n    };\n    var rotatePage = function (pageIndex, direction) {\n        store.get('rotatePage')(pageIndex, direction);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        store.subscribe('pageHeight', handlePageHeightChanged);\n        store.subscribe('pageWidth', handlePageWidthChanged);\n        store.subscribe('rotatedPage', handleRotatedPage);\n        store.subscribe('rotation', handleRotationChanged);\n        store.subscribe('pagesRotation', handlePagesRotationChanged);\n        store.subscribe('viewMode', handleViewModeChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n            store.unsubscribe('pageHeight', handlePageHeightChanged);\n            store.unsubscribe('pageWidth', handlePageWidthChanged);\n            store.unsubscribe('rotatedPage', handleRotatedPage);\n            store.unsubscribe('rotation', handleRotationChanged);\n            store.unsubscribe('pagesRotation', handlePagesRotationChanged);\n            store.unsubscribe('viewMode', handleViewModeChanged);\n        };\n    }, []);\n    core.useIsomorphicLayoutEffect(function () {\n        store.subscribe('currentPage', handleCurrentPageChanged);\n        return function () {\n            store.unsubscribe('currentPage', handleCurrentPageChanged);\n        };\n    }, []);\n    return currentDoc ? (React__namespace.createElement(core.LazyRender, { testId: \"thumbnail__list-container\", attrs: {\n            className: 'rpv-thumbnail__list-container',\n        } },\n        React__namespace.createElement(FetchLabels, { doc: currentDoc }, function (labels) { return (React__namespace.createElement(ThumbnailList, { currentPage: currentPage, doc: currentDoc, labels: labels, pagesRotation: pagesRotation, pageHeight: pageHeight, pageWidth: pageWidth, renderCurrentPageLabel: renderCurrentPageLabel, renderThumbnailItem: renderThumbnailItem, rotatedPage: rotatedPage, rotation: rotation, thumbnailDirection: thumbnailDirection, thumbnailWidth: thumbnailWidth, viewMode: viewMode, onJumpToPage: jump, onRotatePage: rotatePage })); }))) : (React__namespace.createElement(\"div\", { \"data-testid\": \"thumbnail-list__loader\", className: \"rpv-thumbnail__loader\" }, React__namespace.useContext(SpinnerContext).renderSpinner()));\n};\n\nvar thumbnailPlugin = function (pluginProps) {\n    var store = React__namespace.useMemo(function () {\n        return core.createStore({\n            rotatePage: function () {\n            },\n            viewMode: core.ViewMode.SinglePage,\n        });\n    }, []);\n    var _a = React__namespace.useState(''), docId = _a[0], setDocId = _a[1];\n    var CoverDecorator = function (props) { return (React__namespace.createElement(Cover, __assign({}, props, { renderSpinner: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner, store: store }))); };\n    var ThumbnailsDecorator = React__namespace.useCallback(function (props) { return (React__namespace.createElement(SpinnerContext.Provider, { value: { renderSpinner: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderSpinner) || defaultSpinner } },\n        React__namespace.createElement(ThumbnailListWithStore, { renderCurrentPageLabel: pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.renderCurrentPageLabel, renderThumbnailItem: props === null || props === void 0 ? void 0 : props.renderThumbnailItem, store: store, thumbnailDirection: (props === null || props === void 0 ? void 0 : props.thumbnailDirection) || exports.ThumbnailDirection.Vertical, thumbnailWidth: (pluginProps === null || pluginProps === void 0 ? void 0 : pluginProps.thumbnailWidth) || 100 }))); }, [docId]);\n    return {\n        install: function (pluginFunctions) {\n            store.update('jumpToPage', pluginFunctions.jumpToPage);\n            store.update('rotatePage', pluginFunctions.rotatePage);\n        },\n        onDocumentLoad: function (props) {\n            setDocId(props.doc.loadingTask.docId);\n            store.update('doc', props.doc);\n        },\n        onViewerStateChange: function (viewerState) {\n            store.update('currentPage', viewerState.pageIndex);\n            store.update('pagesRotation', viewerState.pagesRotation);\n            store.update('pageHeight', viewerState.pageHeight);\n            store.update('pageWidth', viewerState.pageWidth);\n            store.update('rotation', viewerState.rotation);\n            store.update('rotatedPage', viewerState.rotatedPage);\n            store.update('viewMode', viewerState.viewMode);\n            return viewerState;\n        },\n        Cover: CoverDecorator,\n        Thumbnails: ThumbnailsDecorator,\n    };\n};\n\nexports.thumbnailPlugin = thumbnailPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}