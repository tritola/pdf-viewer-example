{"ast":null,"code":"'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n.default = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar DownArrowIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z\"\n  }));\n};\nvar RightArrowIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z\"\n  }));\n};\nvar shouldBeCollapsed = function (bookmark) {\n  var count = bookmark.count,\n    items = bookmark.items;\n  if (count >= 0) {\n    return false;\n  }\n  var numSubItems = items.length;\n  if (numSubItems === 0) {\n    return false;\n  }\n  var subItems = items.concat([]);\n  while (subItems.length > 0) {\n    var firstChild = subItems.shift();\n    var children = firstChild.items;\n    if (firstChild.count && children && firstChild.count > 0 && children.length > 0) {\n      numSubItems += children.length;\n      subItems = subItems.concat(children);\n    }\n  }\n  return Math.abs(count) === numSubItems;\n};\nvar BookmarkItem = function (_a) {\n  var bookmark = _a.bookmark,\n    depth = _a.depth,\n    doc = _a.doc,\n    index = _a.index,\n    isBookmarkExpanded = _a.isBookmarkExpanded,\n    numberOfSiblings = _a.numberOfSiblings,\n    pathFromRoot = _a.pathFromRoot,\n    renderBookmarkItem = _a.renderBookmarkItem,\n    store = _a.store;\n  var path = pathFromRoot ? \"\".concat(pathFromRoot, \".\").concat(index) : \"\".concat(index);\n  var defaultIsCollapsed = React__namespace.useMemo(function () {\n    return shouldBeCollapsed(bookmark);\n  }, [bookmark]);\n  var bookmarkExpandedMap = store.get('bookmarkExpandedMap');\n  var defaultExpanded = isBookmarkExpanded ? isBookmarkExpanded({\n    bookmark: bookmark,\n    doc: doc,\n    depth: depth,\n    index: index\n  }) : bookmarkExpandedMap.has(path) ? bookmarkExpandedMap.get(path) : !defaultIsCollapsed;\n  var _b = React__namespace.useState(defaultExpanded),\n    expanded = _b[0],\n    setExpanded = _b[1];\n  var hasSubItems = bookmark.items && bookmark.items.length > 0;\n  var toggleSubItems = function () {\n    var newState = !expanded;\n    store.updateCurrentValue('bookmarkExpandedMap', function (currentValue) {\n      return currentValue.set(path, newState);\n    });\n    setExpanded(newState);\n  };\n  var jumpToDest = function () {\n    var dest = bookmark.dest;\n    var jumpToDestination = store.get('jumpToDestination');\n    core.getDestination(doc, dest).then(function (target) {\n      if (jumpToDestination) {\n        jumpToDestination(__assign({\n          label: bookmark.title\n        }, target));\n      }\n    });\n  };\n  var clickBookmark = function () {\n    if (hasSubItems && bookmark.dest) {\n      jumpToDest();\n    }\n  };\n  var clickItem = function () {\n    if (!hasSubItems && bookmark.dest) {\n      jumpToDest();\n    }\n  };\n  var defaultRenderItem = function (onClickItem, children) {\n    return React__namespace.createElement(\"div\", {\n      className: \"rpv-bookmark__item\",\n      style: {\n        paddingLeft: \"\".concat(depth * 1.25, \"rem\")\n      },\n      onClick: onClickItem\n    }, children);\n  };\n  var defaultRenderToggle = function (expandIcon, collapseIcon) {\n    return hasSubItems ? React__namespace.createElement(\"span\", {\n      className: \"rpv-bookmark__toggle\",\n      \"data-testid\": \"bookmark__toggle-\".concat(depth, \"-\").concat(index),\n      onClick: toggleSubItems\n    }, expanded ? expandIcon : collapseIcon) : React__namespace.createElement(\"span\", {\n      className: \"rpv-bookmark__toggle\"\n    });\n  };\n  var defaultRenderTitle = function (onClickBookmark) {\n    return bookmark.url ? React__namespace.createElement(\"a\", {\n      className: \"rpv-bookmark__title\",\n      href: bookmark.url,\n      rel: \"noopener noreferrer nofollow\",\n      target: bookmark.newWindow ? '_blank' : ''\n    }, bookmark.title) : React__namespace.createElement(\"div\", {\n      className: \"rpv-bookmark__title\",\n      \"aria-label\": bookmark.title,\n      onClick: onClickBookmark\n    }, bookmark.title);\n  };\n  return React__namespace.createElement(\"li\", {\n    \"aria-expanded\": expanded ? 'true' : 'false',\n    \"aria-label\": bookmark.title,\n    \"aria-level\": depth + 1,\n    \"aria-posinset\": index + 1,\n    \"aria-setsize\": numberOfSiblings,\n    role: \"treeitem\",\n    tabIndex: -1\n  }, renderBookmarkItem ? renderBookmarkItem({\n    bookmark: bookmark,\n    depth: depth,\n    hasSubItems: hasSubItems,\n    index: index,\n    isExpanded: expanded,\n    path: path,\n    defaultRenderItem: defaultRenderItem,\n    defaultRenderTitle: defaultRenderTitle,\n    defaultRenderToggle: defaultRenderToggle,\n    onClickItem: clickItem,\n    onClickTitle: clickBookmark,\n    onToggleSubItems: toggleSubItems\n  }) : defaultRenderItem(clickItem, React__namespace.createElement(React__namespace.Fragment, null, defaultRenderToggle(React__namespace.createElement(DownArrowIcon, null), React__namespace.createElement(RightArrowIcon, null)), defaultRenderTitle(clickBookmark))), hasSubItems && expanded && React__namespace.createElement(BookmarkList, {\n    bookmarks: bookmark.items,\n    depth: depth + 1,\n    doc: doc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    isRoot: false,\n    pathFromRoot: path,\n    renderBookmarkItem: renderBookmarkItem,\n    store: store\n  }));\n};\nvar BookmarkList = function (_a) {\n  var bookmarks = _a.bookmarks,\n    _b = _a.depth,\n    depth = _b === void 0 ? 0 : _b,\n    doc = _a.doc,\n    isBookmarkExpanded = _a.isBookmarkExpanded,\n    isRoot = _a.isRoot,\n    pathFromRoot = _a.pathFromRoot,\n    renderBookmarkItem = _a.renderBookmarkItem,\n    store = _a.store;\n  return React__namespace.createElement(\"ul\", {\n    className: \"rpv-bookmark__list\",\n    role: isRoot ? 'tree' : 'group',\n    tabIndex: -1\n  }, bookmarks.map(function (bookmark, index) {\n    return React__namespace.createElement(BookmarkItem, {\n      bookmark: bookmark,\n      depth: depth,\n      doc: doc,\n      index: index,\n      isBookmarkExpanded: isBookmarkExpanded,\n      key: index,\n      numberOfSiblings: bookmarks.length,\n      pathFromRoot: pathFromRoot,\n      renderBookmarkItem: renderBookmarkItem,\n      store: store\n    });\n  }));\n};\nvar Toggle;\n(function (Toggle) {\n  Toggle[Toggle[\"Collapse\"] = 0] = \"Collapse\";\n  Toggle[Toggle[\"Expand\"] = 1] = \"Expand\";\n})(Toggle || (Toggle = {}));\nvar BookmarkListRoot = function (_a) {\n  var bookmarks = _a.bookmarks,\n    doc = _a.doc,\n    isBookmarkExpanded = _a.isBookmarkExpanded,\n    renderBookmarkItem = _a.renderBookmarkItem,\n    store = _a.store;\n  var containerRef = React__namespace.useRef();\n  var handleKeyDown = function (e) {\n    var container = containerRef.current;\n    if (!container || !(e.target instanceof HTMLElement) || !container.contains(e.target)) {\n      return;\n    }\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (bookmarkElements, activeEle) {\n          return bookmarkElements.indexOf(activeEle) + 1;\n        });\n        break;\n      case 'ArrowLeft':\n        e.preventDefault();\n        toggle(Toggle.Collapse);\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        toggle(Toggle.Expand);\n        break;\n      case 'ArrowUp':\n        e.preventDefault;\n        moveToItem(function (bookmarkElements, activeEle) {\n          return bookmarkElements.indexOf(activeEle) - 1;\n        });\n        break;\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (bookmarkElements, _) {\n          return bookmarkElements.length - 1;\n        });\n        break;\n      case ' ':\n      case 'Enter':\n      case 'Space':\n        e.preventDefault();\n        clickBookmark();\n        break;\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n  var clickBookmark = function () {\n    var closestItem = document.activeElement.closest('.rpv-bookmark__item');\n    var titleEle = closestItem.querySelector('.rpv-bookmark__title');\n    if (titleEle) {\n      titleEle.click();\n    }\n  };\n  var moveToItem = function (getItemIndex) {\n    var container = containerRef.current;\n    var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n    if (bookmarkElements.length === 0) {\n      return;\n    }\n    var activeEle = document.activeElement;\n    var targetIndex = Math.min(bookmarkElements.length - 1, Math.max(0, getItemIndex(bookmarkElements, activeEle)));\n    var targetEle = bookmarkElements[targetIndex];\n    activeEle.setAttribute('tabindex', '-1');\n    targetEle.setAttribute('tabindex', '0');\n    targetEle.focus();\n  };\n  var toggle = function (toggle) {\n    var container = containerRef.current;\n    var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n    if (bookmarkElements.length === 0) {\n      return;\n    }\n    var closestItem = document.activeElement.closest('.rpv-bookmark__item');\n    var expanedAttribute = toggle === Toggle.Collapse ? 'true' : 'false';\n    if (closestItem && closestItem.parentElement.getAttribute('aria-expanded') === expanedAttribute) {\n      var toggleEle = closestItem.querySelector('.rpv-bookmark__toggle');\n      if (toggleEle) {\n        toggleEle.click();\n      }\n    }\n  };\n  React__namespace.useEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    var container = containerRef.current;\n    if (!container) {\n      return;\n    }\n    var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n    if (bookmarkElements.length > 0) {\n      bookmarkElements[0].focus();\n      bookmarkElements[0].setAttribute('tabindex', '0');\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef\n  }, React__namespace.createElement(BookmarkList, {\n    bookmarks: bookmarks,\n    depth: 0,\n    doc: doc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    isRoot: true,\n    pathFromRoot: \"\",\n    renderBookmarkItem: renderBookmarkItem,\n    store: store\n  }));\n};\nvar BookmarkLoader = function (_a) {\n  var doc = _a.doc,\n    isBookmarkExpanded = _a.isBookmarkExpanded,\n    renderBookmarkItem = _a.renderBookmarkItem,\n    store = _a.store;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var _b = React__namespace.useState({\n      isLoaded: false,\n      items: []\n    }),\n    bookmarks = _b[0],\n    setBookmarks = _b[1];\n  React__namespace.useEffect(function () {\n    setBookmarks({\n      isLoaded: false,\n      items: []\n    });\n    doc.getOutline().then(function (outline) {\n      setBookmarks({\n        isLoaded: true,\n        items: outline || []\n      });\n    });\n  }, [doc]);\n  return !bookmarks.isLoaded ? React__namespace.createElement(\"div\", {\n    className: \"rpv-bookmark__loader\"\n  }, React__namespace.createElement(core.Spinner, null)) : bookmarks.items.length === 0 ? React__namespace.createElement(\"div\", {\n    \"data-testid\": \"bookmark__empty\",\n    className: core.classNames({\n      'rpv-bookmark__empty': true,\n      'rpv-bookmark__empty--rtl': isRtl\n    })\n  }, l10n && l10n.bookmark ? l10n.bookmark.noBookmark : 'There is no bookmark') : React__namespace.createElement(\"div\", {\n    \"data-testid\": \"bookmark__container\",\n    className: core.classNames({\n      'rpv-bookmark__container': true,\n      'rpv-bookmark__container--rtl': isRtl\n    })\n  }, React__namespace.createElement(BookmarkListRoot, {\n    bookmarks: bookmarks.items,\n    doc: doc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    renderBookmarkItem: renderBookmarkItem,\n    store: store\n  }));\n};\nvar BookmarkListWithStore = function (_a) {\n  var isBookmarkExpanded = _a.isBookmarkExpanded,\n    renderBookmarkItem = _a.renderBookmarkItem,\n    store = _a.store;\n  var _b = React__namespace.useState(store.get('doc')),\n    currentDoc = _b[0],\n    setCurrentDoc = _b[1];\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(BookmarkLoader, {\n    doc: currentDoc,\n    isBookmarkExpanded: isBookmarkExpanded,\n    renderBookmarkItem: renderBookmarkItem,\n    store: store\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-bookmark__loader\"\n  }, React__namespace.createElement(core.Spinner, null));\n};\nvar bookmarkPlugin = function () {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      bookmarkExpandedMap: new Map()\n    });\n  }, []);\n  var BookmarksDecorator = function (props) {\n    return React__namespace.createElement(BookmarkListWithStore, {\n      isBookmarkExpanded: props === null || props === void 0 ? void 0 : props.isBookmarkExpanded,\n      renderBookmarkItem: props === null || props === void 0 ? void 0 : props.renderBookmarkItem,\n      store: store\n    });\n  };\n  return {\n    install: function (pluginFunctions) {\n      store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n    },\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    Bookmarks: BookmarksDecorator\n  };\n};\nexports.DownArrowIcon = DownArrowIcon;\nexports.RightArrowIcon = RightArrowIcon;\nexports.bookmarkPlugin = bookmarkPlugin;","map":{"version":3,"names":["core","require","React","_interopNamespaceDefault","e","n","Object","create","keys","forEach","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","default","freeze","React__namespace","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","DownArrowIcon","createElement","Icon","size","RightArrowIcon","shouldBeCollapsed","bookmark","count","items","numSubItems","subItems","concat","firstChild","shift","children","Math","abs","BookmarkItem","_a","depth","doc","index","isBookmarkExpanded","numberOfSiblings","pathFromRoot","renderBookmarkItem","store","path","defaultIsCollapsed","useMemo","bookmarkExpandedMap","defaultExpanded","has","_b","useState","expanded","setExpanded","hasSubItems","toggleSubItems","newState","updateCurrentValue","currentValue","set","jumpToDest","dest","jumpToDestination","getDestination","then","target","label","title","clickBookmark","clickItem","defaultRenderItem","onClickItem","className","style","paddingLeft","onClick","defaultRenderToggle","expandIcon","collapseIcon","defaultRenderTitle","onClickBookmark","url","href","rel","newWindow","role","tabIndex","isExpanded","onClickTitle","onToggleSubItems","Fragment","BookmarkList","bookmarks","isRoot","map","key","Toggle","BookmarkListRoot","containerRef","useRef","handleKeyDown","container","current","HTMLElement","contains","preventDefault","moveToItem","bookmarkElements","activeEle","indexOf","toggle","Collapse","Expand","_","__","closestItem","document","activeElement","closest","titleEle","querySelector","click","getItemIndex","slice","getElementsByClassName","targetIndex","min","max","targetEle","setAttribute","focus","expanedAttribute","parentElement","getAttribute","toggleEle","useEffect","addEventListener","removeEventListener","ref","BookmarkLoader","l10n","useContext","LocalizationContext","direction","ThemeContext","isRtl","TextDirection","RightToLeft","isLoaded","setBookmarks","getOutline","outline","Spinner","classNames","noBookmark","BookmarkListWithStore","currentDoc","setCurrentDoc","handleDocumentChanged","subscribe","unsubscribe","bookmarkPlugin","createStore","Map","BookmarksDecorator","props","install","pluginFunctions","update","onDocumentLoad","Bookmarks","exports"],"sources":["/Users/tuomasritola/Documents/Projects/examples/pdf-viewer-example/node_modules/@react-pdf-viewer/bookmark/lib/cjs/bookmark.js"],"sourcesContent":["'use strict';\n\nvar core = require('@react-pdf-viewer/core');\nvar React = require('react');\n\nfunction _interopNamespaceDefault(e) {\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n.default = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DownArrowIcon = function () {\n    return (React__namespace.createElement(core.Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z\" })));\n};\n\nvar RightArrowIcon = function () { return (React__namespace.createElement(core.Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z\" }))); };\n\nvar shouldBeCollapsed = function (bookmark) {\n    var count = bookmark.count, items = bookmark.items;\n    if (count >= 0) {\n        return false;\n    }\n    var numSubItems = items.length;\n    if (numSubItems === 0) {\n        return false;\n    }\n    var subItems = items.concat([]);\n    while (subItems.length > 0) {\n        var firstChild = subItems.shift();\n        var children = firstChild.items;\n        if (firstChild.count && children && firstChild.count > 0 && children.length > 0) {\n            numSubItems += children.length;\n            subItems = subItems.concat(children);\n        }\n    }\n    return Math.abs(count) === numSubItems;\n};\n\nvar BookmarkItem = function (_a) {\n    var bookmark = _a.bookmark, depth = _a.depth, doc = _a.doc, index = _a.index, isBookmarkExpanded = _a.isBookmarkExpanded, numberOfSiblings = _a.numberOfSiblings, pathFromRoot = _a.pathFromRoot, renderBookmarkItem = _a.renderBookmarkItem, store = _a.store;\n    var path = pathFromRoot ? \"\".concat(pathFromRoot, \".\").concat(index) : \"\".concat(index);\n    var defaultIsCollapsed = React__namespace.useMemo(function () { return shouldBeCollapsed(bookmark); }, [bookmark]);\n    var bookmarkExpandedMap = store.get('bookmarkExpandedMap');\n    var defaultExpanded = isBookmarkExpanded\n        ? isBookmarkExpanded({ bookmark: bookmark, doc: doc, depth: depth, index: index })\n        : bookmarkExpandedMap.has(path)\n            ? bookmarkExpandedMap.get(path)\n            : !defaultIsCollapsed;\n    var _b = React__namespace.useState(defaultExpanded), expanded = _b[0], setExpanded = _b[1];\n    var hasSubItems = bookmark.items && bookmark.items.length > 0;\n    var toggleSubItems = function () {\n        var newState = !expanded;\n        store.updateCurrentValue('bookmarkExpandedMap', function (currentValue) { return currentValue.set(path, newState); });\n        setExpanded(newState);\n    };\n    var jumpToDest = function () {\n        var dest = bookmark.dest;\n        var jumpToDestination = store.get('jumpToDestination');\n        core.getDestination(doc, dest).then(function (target) {\n            if (jumpToDestination) {\n                jumpToDestination(__assign({ label: bookmark.title }, target));\n            }\n        });\n    };\n    var clickBookmark = function () {\n        if (hasSubItems && bookmark.dest) {\n            jumpToDest();\n        }\n    };\n    var clickItem = function () {\n        if (!hasSubItems && bookmark.dest) {\n            jumpToDest();\n        }\n    };\n    var defaultRenderItem = function (onClickItem, children) { return (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__item\", style: {\n            paddingLeft: \"\".concat(depth * 1.25, \"rem\"),\n        }, onClick: onClickItem }, children)); };\n    var defaultRenderToggle = function (expandIcon, collapseIcon) {\n        return hasSubItems ? (React__namespace.createElement(\"span\", { className: \"rpv-bookmark__toggle\", \"data-testid\": \"bookmark__toggle-\".concat(depth, \"-\").concat(index), onClick: toggleSubItems }, expanded ? expandIcon : collapseIcon)) : (React__namespace.createElement(\"span\", { className: \"rpv-bookmark__toggle\" }));\n    };\n    var defaultRenderTitle = function (onClickBookmark) {\n        return bookmark.url ? (React__namespace.createElement(\"a\", { className: \"rpv-bookmark__title\", href: bookmark.url, rel: \"noopener noreferrer nofollow\", target: bookmark.newWindow ? '_blank' : '' }, bookmark.title)) : (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__title\", \"aria-label\": bookmark.title, onClick: onClickBookmark }, bookmark.title));\n    };\n    return (React__namespace.createElement(\"li\", { \"aria-expanded\": expanded ? 'true' : 'false', \"aria-label\": bookmark.title, \"aria-level\": depth + 1, \"aria-posinset\": index + 1, \"aria-setsize\": numberOfSiblings, role: \"treeitem\", tabIndex: -1 },\n        renderBookmarkItem\n            ? renderBookmarkItem({\n                bookmark: bookmark,\n                depth: depth,\n                hasSubItems: hasSubItems,\n                index: index,\n                isExpanded: expanded,\n                path: path,\n                defaultRenderItem: defaultRenderItem,\n                defaultRenderTitle: defaultRenderTitle,\n                defaultRenderToggle: defaultRenderToggle,\n                onClickItem: clickItem,\n                onClickTitle: clickBookmark,\n                onToggleSubItems: toggleSubItems,\n            })\n            : defaultRenderItem(clickItem, React__namespace.createElement(React__namespace.Fragment, null,\n                defaultRenderToggle(React__namespace.createElement(DownArrowIcon, null), React__namespace.createElement(RightArrowIcon, null)),\n                defaultRenderTitle(clickBookmark))),\n        hasSubItems && expanded && (React__namespace.createElement(BookmarkList, { bookmarks: bookmark.items, depth: depth + 1, doc: doc, isBookmarkExpanded: isBookmarkExpanded, isRoot: false, pathFromRoot: path, renderBookmarkItem: renderBookmarkItem, store: store }))));\n};\n\nvar BookmarkList = function (_a) {\n    var bookmarks = _a.bookmarks, _b = _a.depth, depth = _b === void 0 ? 0 : _b, doc = _a.doc, isBookmarkExpanded = _a.isBookmarkExpanded, isRoot = _a.isRoot, pathFromRoot = _a.pathFromRoot, renderBookmarkItem = _a.renderBookmarkItem, store = _a.store;\n    return (React__namespace.createElement(\"ul\", { className: \"rpv-bookmark__list\", role: isRoot ? 'tree' : 'group', tabIndex: -1 }, bookmarks.map(function (bookmark, index) { return (React__namespace.createElement(BookmarkItem, { bookmark: bookmark, depth: depth, doc: doc, index: index, isBookmarkExpanded: isBookmarkExpanded, key: index, numberOfSiblings: bookmarks.length, pathFromRoot: pathFromRoot, renderBookmarkItem: renderBookmarkItem, store: store })); })));\n};\n\nvar Toggle;\n(function (Toggle) {\n    Toggle[Toggle[\"Collapse\"] = 0] = \"Collapse\";\n    Toggle[Toggle[\"Expand\"] = 1] = \"Expand\";\n})(Toggle || (Toggle = {}));\nvar BookmarkListRoot = function (_a) {\n    var bookmarks = _a.bookmarks, doc = _a.doc, isBookmarkExpanded = _a.isBookmarkExpanded, renderBookmarkItem = _a.renderBookmarkItem, store = _a.store;\n    var containerRef = React__namespace.useRef();\n    var handleKeyDown = function (e) {\n        var container = containerRef.current;\n        if (!container || !(e.target instanceof HTMLElement) || !container.contains(e.target)) {\n            return;\n        }\n        switch (e.key) {\n            case 'ArrowDown':\n                e.preventDefault();\n                moveToItem(function (bookmarkElements, activeEle) { return bookmarkElements.indexOf(activeEle) + 1; });\n                break;\n            case 'ArrowLeft':\n                e.preventDefault();\n                toggle(Toggle.Collapse);\n                break;\n            case 'ArrowRight':\n                e.preventDefault();\n                toggle(Toggle.Expand);\n                break;\n            case 'ArrowUp':\n                e.preventDefault;\n                moveToItem(function (bookmarkElements, activeEle) { return bookmarkElements.indexOf(activeEle) - 1; });\n                break;\n            case 'End':\n                e.preventDefault();\n                moveToItem(function (bookmarkElements, _) { return bookmarkElements.length - 1; });\n                break;\n            case ' ':\n            case 'Enter':\n            case 'Space':\n                e.preventDefault();\n                clickBookmark();\n                break;\n            case 'Home':\n                e.preventDefault();\n                moveToItem(function (_, __) { return 0; });\n                break;\n        }\n    };\n    var clickBookmark = function () {\n        var closestItem = document.activeElement.closest('.rpv-bookmark__item');\n        var titleEle = closestItem.querySelector('.rpv-bookmark__title');\n        if (titleEle) {\n            titleEle.click();\n        }\n    };\n    var moveToItem = function (getItemIndex) {\n        var container = containerRef.current;\n        var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n        if (bookmarkElements.length === 0) {\n            return;\n        }\n        var activeEle = document.activeElement;\n        var targetIndex = Math.min(bookmarkElements.length - 1, Math.max(0, getItemIndex(bookmarkElements, activeEle)));\n        var targetEle = bookmarkElements[targetIndex];\n        activeEle.setAttribute('tabindex', '-1');\n        targetEle.setAttribute('tabindex', '0');\n        targetEle.focus();\n    };\n    var toggle = function (toggle) {\n        var container = containerRef.current;\n        var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n        if (bookmarkElements.length === 0) {\n            return;\n        }\n        var closestItem = document.activeElement.closest('.rpv-bookmark__item');\n        var expanedAttribute = toggle === Toggle.Collapse ? 'true' : 'false';\n        if (closestItem && closestItem.parentElement.getAttribute('aria-expanded') === expanedAttribute) {\n            var toggleEle = closestItem.querySelector('.rpv-bookmark__toggle');\n            if (toggleEle) {\n                toggleEle.click();\n            }\n        }\n    };\n    React__namespace.useEffect(function () {\n        document.addEventListener('keydown', handleKeyDown);\n        return function () {\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    React__namespace.useEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var bookmarkElements = [].slice.call(container.getElementsByClassName('rpv-bookmark__item'));\n        if (bookmarkElements.length > 0) {\n            bookmarkElements[0].focus();\n            bookmarkElements[0].setAttribute('tabindex', '0');\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef },\n        React__namespace.createElement(BookmarkList, { bookmarks: bookmarks, depth: 0, doc: doc, isBookmarkExpanded: isBookmarkExpanded, isRoot: true, pathFromRoot: \"\", renderBookmarkItem: renderBookmarkItem, store: store })));\n};\n\nvar BookmarkLoader = function (_a) {\n    var doc = _a.doc, isBookmarkExpanded = _a.isBookmarkExpanded, renderBookmarkItem = _a.renderBookmarkItem, store = _a.store;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var _b = React__namespace.useState({\n        isLoaded: false,\n        items: [],\n    }), bookmarks = _b[0], setBookmarks = _b[1];\n    React__namespace.useEffect(function () {\n        setBookmarks({\n            isLoaded: false,\n            items: [],\n        });\n        doc.getOutline().then(function (outline) {\n            setBookmarks({\n                isLoaded: true,\n                items: outline || [],\n            });\n        });\n    }, [doc]);\n    return !bookmarks.isLoaded ? (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__loader\" },\n        React__namespace.createElement(core.Spinner, null))) : bookmarks.items.length === 0 ? (React__namespace.createElement(\"div\", { \"data-testid\": \"bookmark__empty\", className: core.classNames({\n            'rpv-bookmark__empty': true,\n            'rpv-bookmark__empty--rtl': isRtl,\n        }) }, l10n && l10n.bookmark ? l10n.bookmark.noBookmark : 'There is no bookmark')) : (React__namespace.createElement(\"div\", { \"data-testid\": \"bookmark__container\", className: core.classNames({\n            'rpv-bookmark__container': true,\n            'rpv-bookmark__container--rtl': isRtl,\n        }) },\n        React__namespace.createElement(BookmarkListRoot, { bookmarks: bookmarks.items, doc: doc, isBookmarkExpanded: isBookmarkExpanded, renderBookmarkItem: renderBookmarkItem, store: store })));\n};\n\nvar BookmarkListWithStore = function (_a) {\n    var isBookmarkExpanded = _a.isBookmarkExpanded, renderBookmarkItem = _a.renderBookmarkItem, store = _a.store;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return currentDoc ? (React__namespace.createElement(BookmarkLoader, { doc: currentDoc, isBookmarkExpanded: isBookmarkExpanded, renderBookmarkItem: renderBookmarkItem, store: store })) : (React__namespace.createElement(\"div\", { className: \"rpv-bookmark__loader\" },\n        React__namespace.createElement(core.Spinner, null)));\n};\n\nvar bookmarkPlugin = function () {\n    var store = React__namespace.useMemo(function () {\n        return core.createStore({\n            bookmarkExpandedMap: new Map(),\n        });\n    }, []);\n    var BookmarksDecorator = function (props) { return (React__namespace.createElement(BookmarkListWithStore, { isBookmarkExpanded: props === null || props === void 0 ? void 0 : props.isBookmarkExpanded, renderBookmarkItem: props === null || props === void 0 ? void 0 : props.renderBookmarkItem, store: store })); };\n    return {\n        install: function (pluginFunctions) {\n            store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n        },\n        onDocumentLoad: function (props) {\n            store.update('doc', props.doc);\n        },\n        Bookmarks: BookmarksDecorator,\n    };\n};\n\nexports.DownArrowIcon = DownArrowIcon;\nexports.RightArrowIcon = RightArrowIcon;\nexports.bookmarkPlugin = bookmarkPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}